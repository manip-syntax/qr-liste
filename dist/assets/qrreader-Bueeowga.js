var zt=Object.defineProperty;var Jt=(r,e,t)=>e in r?zt(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Y=(r,e,t)=>Jt(r,typeof e!="symbol"?e+"":e,t);import"./style-xM6tksM2.js";import{_ as Qt,b as ee,$ as nt,p as Gt}from"./preload-helper-D1USPcvn.js";class g{constructor(e,t,i,n,o){this._legacyCanvasSize=g.DEFAULT_CANVAS_SIZE,this._preferredCamera="environment",this._maxScansPerSecond=25,this._lastScanTimestamp=-1,this._destroyed=this._flashOn=this._paused=this._active=!1,this.$video=e,this.$canvas=document.createElement("canvas"),i&&typeof i=="object"?this._onDecode=t:(console.warn(i||n||o?"You're using a deprecated version of the QrScanner constructor which will be removed in the future":"Note that the type of the scan result passed to onDecode will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),this._legacyOnDecode=t),t=typeof i=="object"?i:{},this._onDecodeError=t.onDecodeError||(typeof i=="function"?i:this._onDecodeError),this._calculateScanRegion=t.calculateScanRegion||(typeof n=="function"?n:this._calculateScanRegion),this._preferredCamera=t.preferredCamera||o||this._preferredCamera,this._legacyCanvasSize=typeof i=="number"?i:typeof n=="number"?n:this._legacyCanvasSize,this._maxScansPerSecond=t.maxScansPerSecond||this._maxScansPerSecond,this._onPlay=this._onPlay.bind(this),this._onLoadedMetaData=this._onLoadedMetaData.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this._updateOverlay=this._updateOverlay.bind(this),e.disablePictureInPicture=!0,e.playsInline=!0,e.muted=!0;let a=!1;if(e.hidden&&(e.hidden=!1,a=!0),document.body.contains(e)||(document.body.appendChild(e),a=!0),i=e.parentElement,t.highlightScanRegion||t.highlightCodeOutline){if(n=!!t.overlay,this.$overlay=t.overlay||document.createElement("div"),o=this.$overlay.style,o.position="absolute",o.display="none",o.pointerEvents="none",this.$overlay.classList.add("scan-region-highlight"),!n&&t.highlightScanRegion){this.$overlay.innerHTML='<svg class="scan-region-highlight-svg" viewBox="0 0 238 238" preserveAspectRatio="none" style="position:absolute;width:100%;height:100%;left:0;top:0;fill:none;stroke:#e9b213;stroke-width:4;stroke-linecap:round;stroke-linejoin:round"><path d="M31 2H10a8 8 0 0 0-8 8v21M207 2h21a8 8 0 0 1 8 8v21m0 176v21a8 8 0 0 1-8 8h-21m-176 0H10a8 8 0 0 1-8-8v-21"/></svg>';try{this.$overlay.firstElementChild.animate({transform:["scale(.98)","scale(1.01)"]},{duration:400,iterations:1/0,direction:"alternate",easing:"ease-in-out"})}catch{}i.insertBefore(this.$overlay,this.$video.nextSibling)}t.highlightCodeOutline&&(this.$overlay.insertAdjacentHTML("beforeend",'<svg class="code-outline-highlight" preserveAspectRatio="none" style="display:none;width:100%;height:100%;fill:none;stroke:#e9b213;stroke-width:5;stroke-dasharray:25;stroke-linecap:round;stroke-linejoin:round"><polygon/></svg>'),this.$codeOutlineHighlight=this.$overlay.lastElementChild)}this._scanRegion=this._calculateScanRegion(e),requestAnimationFrame(()=>{let s=window.getComputedStyle(e);s.display==="none"&&(e.style.setProperty("display","block","important"),a=!0),s.visibility!=="visible"&&(e.style.setProperty("visibility","visible","important"),a=!0),a&&(console.warn("QrScanner has overwritten the video hiding style to avoid Safari stopping the playback."),e.style.opacity="0",e.style.width="0",e.style.height="0",this.$overlay&&this.$overlay.parentElement&&this.$overlay.parentElement.removeChild(this.$overlay),delete this.$overlay,delete this.$codeOutlineHighlight),this.$overlay&&this._updateOverlay()}),e.addEventListener("play",this._onPlay),e.addEventListener("loadedmetadata",this._onLoadedMetaData),document.addEventListener("visibilitychange",this._onVisibilityChange),window.addEventListener("resize",this._updateOverlay),this._qrEnginePromise=g.createQrEngine()}static set WORKER_PATH(e){console.warn("Setting QrScanner.WORKER_PATH is not required and not supported anymore. Have a look at the README for new setup instructions.")}static async hasCamera(){try{return!!(await g.listCameras(!1)).length}catch{return!1}}static async listCameras(e=!1){if(!navigator.mediaDevices)return[];let t=async()=>(await navigator.mediaDevices.enumerateDevices()).filter(n=>n.kind==="videoinput"),i;try{e&&(await t()).every(n=>!n.label)&&(i=await navigator.mediaDevices.getUserMedia({audio:!1,video:!0}))}catch{}try{return(await t()).map((n,o)=>({id:n.deviceId,label:n.label||(o===0?"Default Camera":`Camera ${o+1}`)}))}finally{i&&(console.warn("Call listCameras after successfully starting a QR scanner to avoid creating a temporary video stream"),g._stopVideoStream(i))}}async hasFlash(){let e;try{if(this.$video.srcObject){if(!(this.$video.srcObject instanceof MediaStream))return!1;e=this.$video.srcObject}else e=(await this._getCameraStream()).stream;return"torch"in e.getVideoTracks()[0].getSettings()}catch{return!1}finally{e&&e!==this.$video.srcObject&&(console.warn("Call hasFlash after successfully starting the scanner to avoid creating a temporary video stream"),g._stopVideoStream(e))}}isFlashOn(){return this._flashOn}async toggleFlash(){this._flashOn?await this.turnFlashOff():await this.turnFlashOn()}async turnFlashOn(){if(!this._flashOn&&!this._destroyed&&(this._flashOn=!0,this._active&&!this._paused))try{if(!await this.hasFlash())throw"No flash available";await this.$video.srcObject.getVideoTracks()[0].applyConstraints({advanced:[{torch:!0}]})}catch(e){throw this._flashOn=!1,e}}async turnFlashOff(){this._flashOn&&(this._flashOn=!1,await this._restartVideoStream())}destroy(){this.$video.removeEventListener("loadedmetadata",this._onLoadedMetaData),this.$video.removeEventListener("play",this._onPlay),document.removeEventListener("visibilitychange",this._onVisibilityChange),window.removeEventListener("resize",this._updateOverlay),this._destroyed=!0,this._flashOn=!1,this.stop(),g._postWorkerMessage(this._qrEnginePromise,"close")}async start(){if(this._destroyed)throw Error("The QR scanner can not be started as it had been destroyed.");if((!this._active||this._paused)&&(window.location.protocol!=="https:"&&console.warn("The camera stream is only accessible if the page is transferred via https."),this._active=!0,!document.hidden))if(this._paused=!1,this.$video.srcObject)await this.$video.play();else try{let{stream:e,facingMode:t}=await this._getCameraStream();!this._active||this._paused?g._stopVideoStream(e):(this._setVideoMirror(t),this.$video.srcObject=e,await this.$video.play(),this._flashOn&&(this._flashOn=!1,this.turnFlashOn().catch(()=>{})))}catch(e){if(!this._paused)throw this._active=!1,e}}stop(){this.pause(),this._active=!1}async pause(e=!1){if(this._paused=!0,!this._active)return!0;this.$video.pause(),this.$overlay&&(this.$overlay.style.display="none");let t=()=>{this.$video.srcObject instanceof MediaStream&&(g._stopVideoStream(this.$video.srcObject),this.$video.srcObject=null)};return e?(t(),!0):(await new Promise(i=>setTimeout(i,300)),this._paused?(t(),!0):!1)}async setCamera(e){e!==this._preferredCamera&&(this._preferredCamera=e,await this._restartVideoStream())}static async scanImage(e,t,i,n,o=!1,a=!1){let s,l=!1;t&&("scanRegion"in t||"qrEngine"in t||"canvas"in t||"disallowCanvasResizing"in t||"alsoTryWithoutScanRegion"in t||"returnDetailedScanResult"in t)?(s=t.scanRegion,i=t.qrEngine,n=t.canvas,o=t.disallowCanvasResizing||!1,a=t.alsoTryWithoutScanRegion||!1,l=!0):console.warn(t||i||n||o||a?"You're using a deprecated api for scanImage which will be removed in the future.":"Note that the return type of scanImage will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),t=!!i;try{let c,f;[i,c]=await Promise.all([i||g.createQrEngine(),g._loadImage(e)]),[n,f]=g._drawToCanvas(c,s,n,o);let h;if(i instanceof Worker){let d=i;t||g._postWorkerMessageSync(d,"inversionMode","both"),h=await new Promise((p,w)=>{let y,T,E,I=-1;T=$=>{$.data.id===I&&(d.removeEventListener("message",T),d.removeEventListener("error",E),clearTimeout(y),$.data.data!==null?p({data:$.data.data,cornerPoints:g._convertPoints($.data.cornerPoints,s)}):w(g.NO_QR_CODE_FOUND))},E=$=>{d.removeEventListener("message",T),d.removeEventListener("error",E),clearTimeout(y),w("Scanner error: "+($?$.message||$:"Unknown Error"))},d.addEventListener("message",T),d.addEventListener("error",E),y=setTimeout(()=>E("timeout"),1e4);let D=f.getImageData(0,0,n.width,n.height);I=g._postWorkerMessageSync(d,"decode",D,[D.data.buffer])})}else h=await Promise.race([new Promise((d,p)=>window.setTimeout(()=>p("Scanner error: timeout"),1e4)),(async()=>{try{var[d]=await i.detect(n);if(!d)throw g.NO_QR_CODE_FOUND;return{data:d.rawValue,cornerPoints:g._convertPoints(d.cornerPoints,s)}}catch(p){if(d=p.message||p,/not implemented|service unavailable/.test(d))return g._disableBarcodeDetector=!0,g.scanImage(e,{scanRegion:s,canvas:n,disallowCanvasResizing:o,alsoTryWithoutScanRegion:a});throw`Scanner error: ${d}`}})()]);return l?h:h.data}catch(c){if(!s||!a)throw c;let f=await g.scanImage(e,{qrEngine:i,canvas:n,disallowCanvasResizing:o});return l?f:f.data}finally{t||g._postWorkerMessage(i,"close")}}setGrayscaleWeights(e,t,i,n=!0){g._postWorkerMessage(this._qrEnginePromise,"grayscaleWeights",{red:e,green:t,blue:i,useIntegerApproximation:n})}setInversionMode(e){g._postWorkerMessage(this._qrEnginePromise,"inversionMode",e)}static async createQrEngine(e){if(e&&console.warn("Specifying a worker path is not required and not supported anymore."),e=()=>Qt(()=>import("./qr-scanner-worker.min-D85Z9gVD.js"),[],import.meta.url).then(i=>i.createWorker()),!(!g._disableBarcodeDetector&&"BarcodeDetector"in window&&BarcodeDetector.getSupportedFormats&&(await BarcodeDetector.getSupportedFormats()).includes("qr_code")))return e();let t=navigator.userAgentData;return t&&t.brands.some(({brand:i})=>/Chromium/i.test(i))&&/mac ?OS/i.test(t.platform)&&await t.getHighEntropyValues(["architecture","platformVersion"]).then(({architecture:i,platformVersion:n})=>/arm/i.test(i||"arm")&&13<=parseInt(n||"13")).catch(()=>!0)?e():new BarcodeDetector({formats:["qr_code"]})}_onPlay(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay(),this.$overlay&&(this.$overlay.style.display=""),this._scanFrame()}_onLoadedMetaData(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay()}_onVisibilityChange(){document.hidden?this.pause():this._active&&this.start()}_calculateScanRegion(e){let t=Math.round(.6666666666666666*Math.min(e.videoWidth,e.videoHeight));return{x:Math.round((e.videoWidth-t)/2),y:Math.round((e.videoHeight-t)/2),width:t,height:t,downScaledWidth:this._legacyCanvasSize,downScaledHeight:this._legacyCanvasSize}}_updateOverlay(){requestAnimationFrame(()=>{if(this.$overlay){var e=this.$video,t=e.videoWidth,i=e.videoHeight,n=e.offsetWidth,o=e.offsetHeight,a=e.offsetLeft,s=e.offsetTop,l=window.getComputedStyle(e),c=l.objectFit,f=t/i,h=n/o;switch(c){case"none":var d=t,p=i;break;case"fill":d=n,p=o;break;default:(c==="cover"?f>h:f<h)?(p=o,d=p*f):(d=n,p=d/f),c==="scale-down"&&(d=Math.min(d,t),p=Math.min(p,i))}var[w,y]=l.objectPosition.split(" ").map((E,I)=>{const D=parseFloat(E);return E.endsWith("%")?(I?o-p:n-d)*D/100:D});l=this._scanRegion.width||t,h=this._scanRegion.height||i,c=this._scanRegion.x||0;var T=this._scanRegion.y||0;f=this.$overlay.style,f.width=`${l/t*d}px`,f.height=`${h/i*p}px`,f.top=`${s+y+T/i*p}px`,i=/scaleX\(-1\)/.test(e.style.transform),f.left=`${a+(i?n-w-d:w)+(i?t-c-l:c)/t*d}px`,f.transform=e.style.transform}})}static _convertPoints(e,t){if(!t)return e;let i=t.x||0,n=t.y||0,o=t.width&&t.downScaledWidth?t.width/t.downScaledWidth:1;t=t.height&&t.downScaledHeight?t.height/t.downScaledHeight:1;for(let a of e)a.x=a.x*o+i,a.y=a.y*t+n;return e}_scanFrame(){!this._active||this.$video.paused||this.$video.ended||("requestVideoFrameCallback"in this.$video?this.$video.requestVideoFrameCallback.bind(this.$video):requestAnimationFrame)(async()=>{if(!(1>=this.$video.readyState)){var e=Date.now()-this._lastScanTimestamp,t=1e3/this._maxScansPerSecond;e<t&&await new Promise(n=>setTimeout(n,t-e)),this._lastScanTimestamp=Date.now();try{var i=await g.scanImage(this.$video,{scanRegion:this._scanRegion,qrEngine:this._qrEnginePromise,canvas:this.$canvas})}catch(n){if(!this._active)return;this._onDecodeError(n)}!g._disableBarcodeDetector||await this._qrEnginePromise instanceof Worker||(this._qrEnginePromise=g.createQrEngine()),i?(this._onDecode?this._onDecode(i):this._legacyOnDecode&&this._legacyOnDecode(i.data),this.$codeOutlineHighlight&&(clearTimeout(this._codeOutlineHighlightRemovalTimeout),this._codeOutlineHighlightRemovalTimeout=void 0,this.$codeOutlineHighlight.setAttribute("viewBox",`${this._scanRegion.x||0} ${this._scanRegion.y||0} ${this._scanRegion.width||this.$video.videoWidth} ${this._scanRegion.height||this.$video.videoHeight}`),this.$codeOutlineHighlight.firstElementChild.setAttribute("points",i.cornerPoints.map(({x:n,y:o})=>`${n},${o}`).join(" ")),this.$codeOutlineHighlight.style.display="")):this.$codeOutlineHighlight&&!this._codeOutlineHighlightRemovalTimeout&&(this._codeOutlineHighlightRemovalTimeout=setTimeout(()=>this.$codeOutlineHighlight.style.display="none",100))}this._scanFrame()})}_onDecodeError(e){e!==g.NO_QR_CODE_FOUND&&console.log(e)}async _getCameraStream(){if(!navigator.mediaDevices)throw"Camera not found.";let e=/^(environment|user)$/.test(this._preferredCamera)?"facingMode":"deviceId",t=[{width:{min:1024}},{width:{min:768}},{}],i=t.map(n=>Object.assign({},n,{[e]:{exact:this._preferredCamera}}));for(let n of[...i,...t])try{let o=await navigator.mediaDevices.getUserMedia({video:n,audio:!1}),a=this._getFacingMode(o)||(n.facingMode?this._preferredCamera:this._preferredCamera==="environment"?"user":"environment");return{stream:o,facingMode:a}}catch{}throw"Camera not found."}async _restartVideoStream(){let e=this._paused;await this.pause(!0)&&!e&&this._active&&await this.start()}static _stopVideoStream(e){for(let t of e.getTracks())t.stop(),e.removeTrack(t)}_setVideoMirror(e){this.$video.style.transform="scaleX("+(e==="user"?-1:1)+")"}_getFacingMode(e){return(e=e.getVideoTracks()[0])?/rear|back|environment/i.test(e.label)?"environment":/front|user|face/i.test(e.label)?"user":null:null}static _drawToCanvas(e,t,i,n=!1){i=i||document.createElement("canvas");let o=t&&t.x?t.x:0,a=t&&t.y?t.y:0,s=t&&t.width?t.width:e.videoWidth||e.width,l=t&&t.height?t.height:e.videoHeight||e.height;return n||(n=t&&t.downScaledWidth?t.downScaledWidth:s,t=t&&t.downScaledHeight?t.downScaledHeight:l,i.width!==n&&(i.width=n),i.height!==t&&(i.height=t)),t=i.getContext("2d",{alpha:!1}),t.imageSmoothingEnabled=!1,t.drawImage(e,o,a,s,l,0,0,i.width,i.height),[i,t]}static async _loadImage(e){if(e instanceof Image)return await g._awaitImageLoad(e),e;if(e instanceof HTMLVideoElement||e instanceof HTMLCanvasElement||e instanceof SVGImageElement||"OffscreenCanvas"in window&&e instanceof OffscreenCanvas||"ImageBitmap"in window&&e instanceof ImageBitmap)return e;if(e instanceof File||e instanceof Blob||e instanceof URL||typeof e=="string"){let t=new Image;t.src=e instanceof File||e instanceof Blob?URL.createObjectURL(e):e.toString();try{return await g._awaitImageLoad(t),t}finally{(e instanceof File||e instanceof Blob)&&URL.revokeObjectURL(t.src)}}else throw"Unsupported image type."}static async _awaitImageLoad(e){e.complete&&e.naturalWidth!==0||await new Promise((t,i)=>{let n=o=>{e.removeEventListener("load",n),e.removeEventListener("error",n),o instanceof ErrorEvent?i("Image load error"):t()};e.addEventListener("load",n),e.addEventListener("error",n)})}static async _postWorkerMessage(e,t,i,n){return g._postWorkerMessageSync(await e,t,i,n)}static _postWorkerMessageSync(e,t,i,n){if(!(e instanceof Worker))return-1;let o=g._workerMessageId++;return e.postMessage({id:o,type:t,data:i},n),o}}g.DEFAULT_CANVAS_SIZE=400;g.NO_QR_CODE_FOUND="No QR code found";g._disableBarcodeDetector=!1;g._workerMessageId=0;var Kt;function W(){}W.prototype=Object.create(null);function m(){m.init.call(this)}m.EventEmitter=m;m.usingDomains=!1;m.prototype.domain=void 0;m.prototype._events=void 0;m.prototype._maxListeners=void 0;m.defaultMaxListeners=10;m.init=function(){this.domain=null,m.usingDomains&&Kt.active,(!this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=new W,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};m.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this};function ot(r){return r._maxListeners===void 0?m.defaultMaxListeners:r._maxListeners}m.prototype.getMaxListeners=function(){return ot(this)};function Zt(r,e,t){if(e)r.call(t);else for(var i=r.length,n=ae(r,i),o=0;o<i;++o)n[o].call(t)}function Xt(r,e,t,i){if(e)r.call(t,i);else for(var n=r.length,o=ae(r,n),a=0;a<n;++a)o[a].call(t,i)}function er(r,e,t,i,n){if(e)r.call(t,i,n);else for(var o=r.length,a=ae(r,o),s=0;s<o;++s)a[s].call(t,i,n)}function tr(r,e,t,i,n,o){if(e)r.call(t,i,n,o);else for(var a=r.length,s=ae(r,a),l=0;l<a;++l)s[l].call(t,i,n,o)}function rr(r,e,t,i){if(e)r.apply(t,i);else for(var n=r.length,o=ae(r,n),a=0;a<n;++a)o[a].apply(t,i)}m.prototype.emit=function(e){var t,i,n,o,a,s,l,c=e==="error";if(s=this._events,s)c=c&&s.error==null;else if(!c)return!1;if(l=this.domain,c){if(t=arguments[1],l)t||(t=new Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=l,t.domainThrown=!1,l.emit("error",t);else{if(t instanceof Error)throw t;var f=new Error('Uncaught, unspecified "error" event. ('+t+")");throw f.context=t,f}return!1}if(i=s[e],!i)return!1;var h=typeof i=="function";switch(n=arguments.length,n){case 1:Zt(i,h,this);break;case 2:Xt(i,h,this,arguments[1]);break;case 3:er(i,h,this,arguments[1],arguments[2]);break;case 4:tr(i,h,this,arguments[1],arguments[2],arguments[3]);break;default:for(o=new Array(n-1),a=1;a<n;a++)o[a-1]=arguments[a];rr(i,h,this,o)}return!0};function at(r,e,t,i){var n,o,a;if(typeof t!="function")throw new TypeError('"listener" argument must be a function');if(o=r._events,o?(o.newListener&&(r.emit("newListener",e,t.listener?t.listener:t),o=r._events),a=o[e]):(o=r._events=new W,r._eventsCount=0),!a)a=o[e]=t,++r._eventsCount;else if(typeof a=="function"?a=o[e]=i?[t,a]:[a,t]:i?a.unshift(t):a.push(t),!a.warned&&(n=ot(r),n&&n>0&&a.length>n)){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=r,s.type=e,s.count=a.length,ir(s)}return r}function ir(r){typeof console.warn=="function"?console.warn(r):console.log(r)}m.prototype.addListener=function(e,t){return at(this,e,t,!1)};m.prototype.on=m.prototype.addListener;m.prototype.prependListener=function(e,t){return at(this,e,t,!0)};function st(r,e,t){var i=!1;function n(){r.removeListener(e,n),i||(i=!0,t.apply(r,arguments))}return n.listener=t,n}m.prototype.once=function(e,t){if(typeof t!="function")throw new TypeError('"listener" argument must be a function');return this.on(e,st(this,e,t)),this};m.prototype.prependOnceListener=function(e,t){if(typeof t!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(e,st(this,e,t)),this};m.prototype.removeListener=function(e,t){var i,n,o,a,s;if(typeof t!="function")throw new TypeError('"listener" argument must be a function');if(n=this._events,!n)return this;if(i=n[e],!i)return this;if(i===t||i.listener&&i.listener===t)--this._eventsCount===0?this._events=new W:(delete n[e],n.removeListener&&this.emit("removeListener",e,i.listener||t));else if(typeof i!="function"){for(o=-1,a=i.length;a-- >0;)if(i[a]===t||i[a].listener&&i[a].listener===t){s=i[a].listener,o=a;break}if(o<0)return this;if(i.length===1){if(i[0]=void 0,--this._eventsCount===0)return this._events=new W,this;delete n[e]}else nr(i,o);n.removeListener&&this.emit("removeListener",e,s||t)}return this};m.prototype.removeAllListeners=function(e){var t,i;if(i=this._events,!i)return this;if(!i.removeListener)return arguments.length===0?(this._events=new W,this._eventsCount=0):i[e]&&(--this._eventsCount===0?this._events=new W:delete i[e]),this;if(arguments.length===0){for(var n=Object.keys(i),o=0,a;o<n.length;++o)a=n[o],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=new W,this._eventsCount=0,this}if(t=i[e],typeof t=="function")this.removeListener(e,t);else if(t)do this.removeListener(e,t[t.length-1]);while(t[0]);return this};m.prototype.listeners=function(e){var t,i,n=this._events;return n?(t=n[e],t?typeof t=="function"?i=[t.listener||t]:i=or(t):i=[]):i=[],i};m.listenerCount=function(r,e){return typeof r.listenerCount=="function"?r.listenerCount(e):lt.call(r,e)};m.prototype.listenerCount=lt;function lt(r){var e=this._events;if(e){var t=e[r];if(typeof t=="function")return 1;if(t)return t.length}return 0}m.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};function nr(r,e){for(var t=e,i=t+1,n=r.length;i<n;t+=1,i+=1)r[t]=r[i];r.pop()}function ae(r,e){for(var t=new Array(e);e--;)t[e]=r[e];return t}function or(r){for(var e=new Array(r.length),t=0;t<e.length;++t)e[t]=r[t].listener||r[t];return e}var re=typeof window<"u"?window:typeof self<"u"?self:typeof window<"u"?window:{},x=[],C=[],ar=typeof Uint8Array<"u"?Uint8Array:Array,ke=!1;function ut(){ke=!0;for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,t=r.length;e<t;++e)x[e]=r[e],C[r.charCodeAt(e)]=e;C[45]=62,C[95]=63}function sr(r){ke||ut();var e,t,i,n,o,a,s=r.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o=r[s-2]==="="?2:r[s-1]==="="?1:0,a=new ar(s*3/4-o),i=o>0?s-4:s;var l=0;for(e=0,t=0;e<i;e+=4,t+=3)n=C[r.charCodeAt(e)]<<18|C[r.charCodeAt(e+1)]<<12|C[r.charCodeAt(e+2)]<<6|C[r.charCodeAt(e+3)],a[l++]=n>>16&255,a[l++]=n>>8&255,a[l++]=n&255;return o===2?(n=C[r.charCodeAt(e)]<<2|C[r.charCodeAt(e+1)]>>4,a[l++]=n&255):o===1&&(n=C[r.charCodeAt(e)]<<10|C[r.charCodeAt(e+1)]<<4|C[r.charCodeAt(e+2)]>>2,a[l++]=n>>8&255,a[l++]=n&255),a}function lr(r){return x[r>>18&63]+x[r>>12&63]+x[r>>6&63]+x[r&63]}function ur(r,e,t){for(var i,n=[],o=e;o<t;o+=3)i=(r[o]<<16)+(r[o+1]<<8)+r[o+2],n.push(lr(i));return n.join("")}function Ve(r){ke||ut();for(var e,t=r.length,i=t%3,n="",o=[],a=16383,s=0,l=t-i;s<l;s+=a)o.push(ur(r,s,s+a>l?l:s+a));return i===1?(e=r[t-1],n+=x[e>>2],n+=x[e<<4&63],n+="=="):i===2&&(e=(r[t-2]<<8)+r[t-1],n+=x[e>>10],n+=x[e>>4&63],n+=x[e<<2&63],n+="="),o.push(n),o.join("")}function ye(r,e,t,i,n){var o,a,s=n*8-i-1,l=(1<<s)-1,c=l>>1,f=-7,h=t?n-1:0,d=t?-1:1,p=r[e+h];for(h+=d,o=p&(1<<-f)-1,p>>=-f,f+=s;f>0;o=o*256+r[e+h],h+=d,f-=8);for(a=o&(1<<-f)-1,o>>=-f,f+=i;f>0;a=a*256+r[e+h],h+=d,f-=8);if(o===0)o=1-c;else{if(o===l)return a?NaN:(p?-1:1)*(1/0);a=a+Math.pow(2,i),o=o-c}return(p?-1:1)*a*Math.pow(2,o-i)}function ht(r,e,t,i,n,o){var a,s,l,c=o*8-n-1,f=(1<<c)-1,h=f>>1,d=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:o-1,w=i?1:-1,y=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=f):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),a+h>=1?e+=d/l:e+=d*Math.pow(2,1-h),e*l>=2&&(a++,l/=2),a+h>=f?(s=0,a=f):a+h>=1?(s=(e*l-1)*Math.pow(2,n),a=a+h):(s=e*Math.pow(2,h-1)*Math.pow(2,n),a=0));n>=8;r[t+p]=s&255,p+=w,s/=256,n-=8);for(a=a<<n|s,c+=n;c>0;r[t+p]=a&255,p+=w,a/=256,c-=8);r[t+p-w]|=y*128}var hr={}.toString,ct=Array.isArray||function(r){return hr.call(r)=="[object Array]"},cr=50;u.TYPED_ARRAY_SUPPORT=re.TYPED_ARRAY_SUPPORT!==void 0?re.TYPED_ARRAY_SUPPORT:!0;pe();function pe(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function B(r,e){if(pe()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(r=new Uint8Array(e),r.__proto__=u.prototype):(r===null&&(r=new u(e)),r.length=e),r}function u(r,e,t){if(!u.TYPED_ARRAY_SUPPORT&&!(this instanceof u))return new u(r,e,t);if(typeof r=="number"){if(typeof e=="string")throw new Error("If encoding is specified then the first argument must be a string");return Ue(this,r)}return ft(this,r,e,t)}u.poolSize=8192;u._augment=function(r){return r.__proto__=u.prototype,r};function ft(r,e,t,i){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer?pr(r,e,t,i):typeof e=="string"?dr(r,e,t):gr(r,e)}u.from=function(r,e,t){return ft(null,r,e,t)};u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&u[Symbol.species]);function dt(r){if(typeof r!="number")throw new TypeError('"size" argument must be a number');if(r<0)throw new RangeError('"size" argument must not be negative')}function fr(r,e,t,i){return dt(e),e<=0?B(r,e):t!==void 0?typeof i=="string"?B(r,e).fill(t,i):B(r,e).fill(t):B(r,e)}u.alloc=function(r,e,t){return fr(null,r,e,t)};function Ue(r,e){if(dt(e),r=B(r,e<0?0:qe(e)|0),!u.TYPED_ARRAY_SUPPORT)for(var t=0;t<e;++t)r[t]=0;return r}u.allocUnsafe=function(r){return Ue(null,r)};u.allocUnsafeSlow=function(r){return Ue(null,r)};function dr(r,e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!u.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');var i=pt(e,t)|0;r=B(r,i);var n=r.write(e,t);return n!==i&&(r=r.slice(0,n)),r}function $e(r,e){var t=e.length<0?0:qe(e.length)|0;r=B(r,t);for(var i=0;i<t;i+=1)r[i]=e[i]&255;return r}function pr(r,e,t,i){if(e.byteLength,t<0||e.byteLength<t)throw new RangeError("'offset' is out of bounds");if(e.byteLength<t+(i||0))throw new RangeError("'length' is out of bounds");return t===void 0&&i===void 0?e=new Uint8Array(e):i===void 0?e=new Uint8Array(e,t):e=new Uint8Array(e,t,i),u.TYPED_ARRAY_SUPPORT?(r=e,r.__proto__=u.prototype):r=$e(r,e),r}function gr(r,e){if(P(e)){var t=qe(e.length)|0;return r=B(r,t),r.length===0||e.copy(r,0,0,t),r}if(e){if(typeof ArrayBuffer<"u"&&e.buffer instanceof ArrayBuffer||"length"in e)return typeof e.length!="number"||xr(e.length)?B(r,0):$e(r,e);if(e.type==="Buffer"&&ct(e.data))return $e(r,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function qe(r){if(r>=pe())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+pe().toString(16)+" bytes");return r|0}u.isBuffer=z;function P(r){return!!(r!=null&&r._isBuffer)}u.compare=function(e,t){if(!P(e)||!P(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var i=e.length,n=t.length,o=0,a=Math.min(i,n);o<a;++o)if(e[o]!==t[o]){i=e[o],n=t[o];break}return i<n?-1:n<i?1:0};u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};u.concat=function(e,t){if(!ct(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return u.alloc(0);var i;if(t===void 0)for(t=0,i=0;i<e.length;++i)t+=e[i].length;var n=u.allocUnsafe(t),o=0;for(i=0;i<e.length;++i){var a=e[i];if(!P(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,o),o+=a.length}return n};function pt(r,e){if(P(r))return r.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(r)||r instanceof ArrayBuffer))return r.byteLength;typeof r!="string"&&(r=""+r);var t=r.length;if(t===0)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":case void 0:return ge(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return Et(r).length;default:if(i)return ge(r).length;e=(""+e).toLowerCase(),i=!0}}u.byteLength=pt;function mr(r,e,t){var i=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(r||(r="utf8");;)switch(r){case"hex":return Tr(this,e,t);case"utf8":case"utf-8":return vt(this,e,t);case"ascii":return Rr(this,e,t);case"latin1":case"binary":return Ar(this,e,t);case"base64":return br(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Cr(this,e,t);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),i=!0}}u.prototype._isBuffer=!0;function V(r,e,t){var i=r[e];r[e]=r[t],r[t]=i}u.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)V(this,t,t+1);return this};u.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)V(this,t,t+3),V(this,t+1,t+2);return this};u.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)V(this,t,t+7),V(this,t+1,t+6),V(this,t+2,t+5),V(this,t+3,t+4);return this};u.prototype.toString=function(){var e=this.length|0;return e===0?"":arguments.length===0?vt(this,0,e):mr.apply(this,arguments)};u.prototype.equals=function(e){if(!P(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:u.compare(this,e)===0};u.prototype.inspect=function(){var e="",t=cr;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"};u.prototype.compare=function(e,t,i,n,o){if(!P(e))throw new TypeError("Argument must be a Buffer");if(t===void 0&&(t=0),i===void 0&&(i=e?e.length:0),n===void 0&&(n=0),o===void 0&&(o=this.length),t<0||i>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=i)return 0;if(n>=o)return-1;if(t>=i)return 1;if(t>>>=0,i>>>=0,n>>>=0,o>>>=0,this===e)return 0;for(var a=o-n,s=i-t,l=Math.min(a,s),c=this.slice(n,o),f=e.slice(t,i),h=0;h<l;++h)if(c[h]!==f[h]){a=c[h],s=f[h];break}return a<s?-1:s<a?1:0};function gt(r,e,t,i,n){if(r.length===0)return-1;if(typeof t=="string"?(i=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,isNaN(t)&&(t=n?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if(n)return-1;t=r.length-1}else if(t<0)if(n)t=0;else return-1;if(typeof e=="string"&&(e=u.from(e,i)),P(e))return e.length===0?-1:ze(r,e,t,i,n);if(typeof e=="number")return e=e&255,u.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?n?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):ze(r,[e],t,i,n);throw new TypeError("val must be string, number or Buffer")}function ze(r,e,t,i,n){var o=1,a=r.length,s=e.length;if(i!==void 0&&(i=String(i).toLowerCase(),i==="ucs2"||i==="ucs-2"||i==="utf16le"||i==="utf-16le")){if(r.length<2||e.length<2)return-1;o=2,a/=2,s/=2,t/=2}function l(p,w){return o===1?p[w]:p.readUInt16BE(w*o)}var c;if(n){var f=-1;for(c=t;c<a;c++)if(l(r,c)===l(e,f===-1?0:c-f)){if(f===-1&&(f=c),c-f+1===s)return f*o}else f!==-1&&(c-=c-f),f=-1}else for(t+s>a&&(t=a-s),c=t;c>=0;c--){for(var h=!0,d=0;d<s;d++)if(l(r,c+d)!==l(e,d)){h=!1;break}if(h)return c}return-1}u.prototype.includes=function(e,t,i){return this.indexOf(e,t,i)!==-1};u.prototype.indexOf=function(e,t,i){return gt(this,e,t,i,!0)};u.prototype.lastIndexOf=function(e,t,i){return gt(this,e,t,i,!1)};function vr(r,e,t,i){t=Number(t)||0;var n=r.length-t;i?(i=Number(i),i>n&&(i=n)):i=n;var o=e.length;if(o%2!==0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var a=0;a<i;++a){var s=parseInt(e.substr(a*2,2),16);if(isNaN(s))return a;r[t+a]=s}return a}function wr(r,e,t,i){return be(ge(e,r.length-t),r,t,i)}function mt(r,e,t,i){return be(Dr(e),r,t,i)}function yr(r,e,t,i){return mt(r,e,t,i)}function _r(r,e,t,i){return be(Et(e),r,t,i)}function Er(r,e,t,i){return be($r(e,r.length-t),r,t,i)}u.prototype.write=function(e,t,i,n){if(t===void 0)n="utf8",i=this.length,t=0;else if(i===void 0&&typeof t=="string")n=t,i=this.length,t=0;else if(isFinite(t))t=t|0,isFinite(i)?(i=i|0,n===void 0&&(n="utf8")):(n=i,i=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var o=this.length-t;if((i===void 0||i>o)&&(i=o),e.length>0&&(i<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var a=!1;;)switch(n){case"hex":return vr(this,e,t,i);case"utf8":case"utf-8":return wr(this,e,t,i);case"ascii":return mt(this,e,t,i);case"latin1":case"binary":return yr(this,e,t,i);case"base64":return _r(this,e,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Er(this,e,t,i);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}};u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function br(r,e,t){return e===0&&t===r.length?Ve(r):Ve(r.slice(e,t))}function vt(r,e,t){t=Math.min(r.length,t);for(var i=[],n=e;n<t;){var o=r[n],a=null,s=o>239?4:o>223?3:o>191?2:1;if(n+s<=t){var l,c,f,h;switch(s){case 1:o<128&&(a=o);break;case 2:l=r[n+1],(l&192)===128&&(h=(o&31)<<6|l&63,h>127&&(a=h));break;case 3:l=r[n+1],c=r[n+2],(l&192)===128&&(c&192)===128&&(h=(o&15)<<12|(l&63)<<6|c&63,h>2047&&(h<55296||h>57343)&&(a=h));break;case 4:l=r[n+1],c=r[n+2],f=r[n+3],(l&192)===128&&(c&192)===128&&(f&192)===128&&(h=(o&15)<<18|(l&63)<<12|(c&63)<<6|f&63,h>65535&&h<1114112&&(a=h))}}a===null?(a=65533,s=1):a>65535&&(a-=65536,i.push(a>>>10&1023|55296),a=56320|a&1023),i.push(a),n+=s}return Sr(i)}var Je=4096;function Sr(r){var e=r.length;if(e<=Je)return String.fromCharCode.apply(String,r);for(var t="",i=0;i<e;)t+=String.fromCharCode.apply(String,r.slice(i,i+=Je));return t}function Rr(r,e,t){var i="";t=Math.min(r.length,t);for(var n=e;n<t;++n)i+=String.fromCharCode(r[n]&127);return i}function Ar(r,e,t){var i="";t=Math.min(r.length,t);for(var n=e;n<t;++n)i+=String.fromCharCode(r[n]);return i}function Tr(r,e,t){var i=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>i)&&(t=i);for(var n="",o=e;o<t;++o)n+=Ir(r[o]);return n}function Cr(r,e,t){for(var i=r.slice(e,t),n="",o=0;o<i.length;o+=2)n+=String.fromCharCode(i[o]+i[o+1]*256);return n}u.prototype.slice=function(e,t){var i=this.length;e=~~e,t=t===void 0?i:~~t,e<0?(e+=i,e<0&&(e=0)):e>i&&(e=i),t<0?(t+=i,t<0&&(t=0)):t>i&&(t=i),t<e&&(t=e);var n;if(u.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=u.prototype;else{var o=t-e;n=new u(o,void 0);for(var a=0;a<o;++a)n[a]=this[a+e]}return n};function b(r,e,t){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUIntLE=function(e,t,i){e=e|0,t=t|0,i||b(e,t,this.length);for(var n=this[e],o=1,a=0;++a<t&&(o*=256);)n+=this[e+a]*o;return n};u.prototype.readUIntBE=function(e,t,i){e=e|0,t=t|0,i||b(e,t,this.length);for(var n=this[e+--t],o=1;t>0&&(o*=256);)n+=this[e+--t]*o;return n};u.prototype.readUInt8=function(e,t){return t||b(e,1,this.length),this[e]};u.prototype.readUInt16LE=function(e,t){return t||b(e,2,this.length),this[e]|this[e+1]<<8};u.prototype.readUInt16BE=function(e,t){return t||b(e,2,this.length),this[e]<<8|this[e+1]};u.prototype.readUInt32LE=function(e,t){return t||b(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};u.prototype.readUInt32BE=function(e,t){return t||b(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};u.prototype.readIntLE=function(e,t,i){e=e|0,t=t|0,i||b(e,t,this.length);for(var n=this[e],o=1,a=0;++a<t&&(o*=256);)n+=this[e+a]*o;return o*=128,n>=o&&(n-=Math.pow(2,8*t)),n};u.prototype.readIntBE=function(e,t,i){e=e|0,t=t|0,i||b(e,t,this.length);for(var n=t,o=1,a=this[e+--n];n>0&&(o*=256);)a+=this[e+--n]*o;return o*=128,a>=o&&(a-=Math.pow(2,8*t)),a};u.prototype.readInt8=function(e,t){return t||b(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};u.prototype.readInt16LE=function(e,t){t||b(e,2,this.length);var i=this[e]|this[e+1]<<8;return i&32768?i|4294901760:i};u.prototype.readInt16BE=function(e,t){t||b(e,2,this.length);var i=this[e+1]|this[e]<<8;return i&32768?i|4294901760:i};u.prototype.readInt32LE=function(e,t){return t||b(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};u.prototype.readInt32BE=function(e,t){return t||b(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};u.prototype.readFloatLE=function(e,t){return t||b(e,4,this.length),ye(this,e,!0,23,4)};u.prototype.readFloatBE=function(e,t){return t||b(e,4,this.length),ye(this,e,!1,23,4)};u.prototype.readDoubleLE=function(e,t){return t||b(e,8,this.length),ye(this,e,!0,52,8)};u.prototype.readDoubleBE=function(e,t){return t||b(e,8,this.length),ye(this,e,!1,52,8)};function R(r,e,t,i,n,o){if(!P(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<o)throw new RangeError('"value" argument is out of bounds');if(t+i>r.length)throw new RangeError("Index out of range")}u.prototype.writeUIntLE=function(e,t,i,n){if(e=+e,t=t|0,i=i|0,!n){var o=Math.pow(2,8*i)-1;R(this,e,t,i,o,0)}var a=1,s=0;for(this[t]=e&255;++s<i&&(a*=256);)this[t+s]=e/a&255;return t+i};u.prototype.writeUIntBE=function(e,t,i,n){if(e=+e,t=t|0,i=i|0,!n){var o=Math.pow(2,8*i)-1;R(this,e,t,i,o,0)}var a=i-1,s=1;for(this[t+a]=e&255;--a>=0&&(s*=256);)this[t+a]=e/s&255;return t+i};u.prototype.writeUInt8=function(e,t,i){return e=+e,t=t|0,i||R(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=e&255,t+1};function _e(r,e,t,i){e<0&&(e=65535+e+1);for(var n=0,o=Math.min(r.length-t,2);n<o;++n)r[t+n]=(e&255<<8*(i?n:1-n))>>>(i?n:1-n)*8}u.prototype.writeUInt16LE=function(e,t,i){return e=+e,t=t|0,i||R(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):_e(this,e,t,!0),t+2};u.prototype.writeUInt16BE=function(e,t,i){return e=+e,t=t|0,i||R(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):_e(this,e,t,!1),t+2};function Ee(r,e,t,i){e<0&&(e=4294967295+e+1);for(var n=0,o=Math.min(r.length-t,4);n<o;++n)r[t+n]=e>>>(i?n:3-n)*8&255}u.prototype.writeUInt32LE=function(e,t,i){return e=+e,t=t|0,i||R(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255):Ee(this,e,t,!0),t+4};u.prototype.writeUInt32BE=function(e,t,i){return e=+e,t=t|0,i||R(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):Ee(this,e,t,!1),t+4};u.prototype.writeIntLE=function(e,t,i,n){if(e=+e,t=t|0,!n){var o=Math.pow(2,8*i-1);R(this,e,t,i,o-1,-o)}var a=0,s=1,l=0;for(this[t]=e&255;++a<i&&(s*=256);)e<0&&l===0&&this[t+a-1]!==0&&(l=1),this[t+a]=(e/s>>0)-l&255;return t+i};u.prototype.writeIntBE=function(e,t,i,n){if(e=+e,t=t|0,!n){var o=Math.pow(2,8*i-1);R(this,e,t,i,o-1,-o)}var a=i-1,s=1,l=0;for(this[t+a]=e&255;--a>=0&&(s*=256);)e<0&&l===0&&this[t+a+1]!==0&&(l=1),this[t+a]=(e/s>>0)-l&255;return t+i};u.prototype.writeInt8=function(e,t,i){return e=+e,t=t|0,i||R(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=e&255,t+1};u.prototype.writeInt16LE=function(e,t,i){return e=+e,t=t|0,i||R(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):_e(this,e,t,!0),t+2};u.prototype.writeInt16BE=function(e,t,i){return e=+e,t=t|0,i||R(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):_e(this,e,t,!1),t+2};u.prototype.writeInt32LE=function(e,t,i){return e=+e,t=t|0,i||R(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):Ee(this,e,t,!0),t+4};u.prototype.writeInt32BE=function(e,t,i){return e=+e,t=t|0,i||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):Ee(this,e,t,!1),t+4};function wt(r,e,t,i,n,o){if(t+i>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function yt(r,e,t,i,n){return n||wt(r,e,t,4),ht(r,e,t,i,23,4),t+4}u.prototype.writeFloatLE=function(e,t,i){return yt(this,e,t,!0,i)};u.prototype.writeFloatBE=function(e,t,i){return yt(this,e,t,!1,i)};function _t(r,e,t,i,n){return n||wt(r,e,t,8),ht(r,e,t,i,52,8),t+8}u.prototype.writeDoubleLE=function(e,t,i){return _t(this,e,t,!0,i)};u.prototype.writeDoubleBE=function(e,t,i){return _t(this,e,t,!1,i)};u.prototype.copy=function(e,t,i,n){if(i||(i=0),!n&&n!==0&&(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<i&&(n=i),n===i||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-i&&(n=e.length-t+i);var o=n-i,a;if(this===e&&i<t&&t<n)for(a=o-1;a>=0;--a)e[a+t]=this[a+i];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(a=0;a<o;++a)e[a+t]=this[a+i];else Uint8Array.prototype.set.call(e,this.subarray(i,i+o),t);return o};u.prototype.fill=function(e,t,i,n){if(typeof e=="string"){if(typeof t=="string"?(n=t,t=0,i=this.length):typeof i=="string"&&(n=i,i=this.length),e.length===1){var o=e.charCodeAt(0);o<256&&(e=o)}if(n!==void 0&&typeof n!="string")throw new TypeError("encoding must be a string");if(typeof n=="string"&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else typeof e=="number"&&(e=e&255);if(t<0||this.length<t||this.length<i)throw new RangeError("Out of range index");if(i<=t)return this;t=t>>>0,i=i===void 0?this.length:i>>>0,e||(e=0);var a;if(typeof e=="number")for(a=t;a<i;++a)this[a]=e;else{var s=P(e)?e:ge(new u(e,n).toString()),l=s.length;for(a=0;a<i-t;++a)this[a+t]=s[a%l]}return this};var Lr=/[^+\/0-9A-Za-z-_]/g;function Mr(r){if(r=Or(r).replace(Lr,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function Or(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function Ir(r){return r<16?"0"+r.toString(16):r.toString(16)}function ge(r,e){e=e||1/0;for(var t,i=r.length,n=null,o=[],a=0;a<i;++a){if(t=r.charCodeAt(a),t>55295&&t<57344){if(!n){if(t>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(a+1===i){(e-=3)>-1&&o.push(239,191,189);continue}n=t;continue}if(t<56320){(e-=3)>-1&&o.push(239,191,189),n=t;continue}t=(n-55296<<10|t-56320)+65536}else n&&(e-=3)>-1&&o.push(239,191,189);if(n=null,t<128){if((e-=1)<0)break;o.push(t)}else if(t<2048){if((e-=2)<0)break;o.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;o.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return o}function Dr(r){for(var e=[],t=0;t<r.length;++t)e.push(r.charCodeAt(t)&255);return e}function $r(r,e){for(var t,i,n,o=[],a=0;a<r.length&&!((e-=2)<0);++a)t=r.charCodeAt(a),i=t>>8,n=t%256,o.push(n),o.push(i);return o}function Et(r){return sr(Mr(r))}function be(r,e,t,i){for(var n=0;n<i&&!(n+t>=e.length||n>=r.length);++n)e[n+t]=r[n];return n}function xr(r){return r!==r}function z(r){return r!=null&&(!!r._isBuffer||bt(r)||Pr(r))}function bt(r){return!!r.constructor&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}function Pr(r){return typeof r.readFloatLE=="function"&&typeof r.slice=="function"&&bt(r.slice(0,0))}function St(){throw new Error("setTimeout has not been defined")}function Rt(){throw new Error("clearTimeout has not been defined")}var q=St,N=Rt;typeof re.setTimeout=="function"&&(q=setTimeout);typeof re.clearTimeout=="function"&&(N=clearTimeout);function At(r){if(q===setTimeout)return setTimeout(r,0);if((q===St||!q)&&setTimeout)return q=setTimeout,setTimeout(r,0);try{return q(r,0)}catch{try{return q.call(null,r,0)}catch{return q.call(this,r,0)}}}function Br(r){if(N===clearTimeout)return clearTimeout(r);if((N===Rt||!N)&&clearTimeout)return N=clearTimeout,clearTimeout(r);try{return N(r)}catch{try{return N.call(null,r)}catch{return N.call(this,r)}}}var k=[],te=!1,J,ce=-1;function kr(){!te||!J||(te=!1,J.length?k=J.concat(k):ce=-1,k.length&&Tt())}function Tt(){if(!te){var r=At(kr);te=!0;for(var e=k.length;e;){for(J=k,k=[];++ce<e;)J&&J[ce].run();ce=-1,e=k.length}J=null,te=!1,Br(r)}}function A(r){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];k.push(new Ct(r,e)),k.length===1&&!te&&At(Tt)}function Ct(r,e){this.fun=r,this.array=e}Ct.prototype.run=function(){this.fun.apply(null,this.array)};var Ur="browser",qr="browser",Nr=!0,jr={},Wr=[],Fr="",Hr={},Yr={},Vr={};function G(){}var zr=G,Jr=G,Qr=G,Gr=G,Kr=G,Zr=G,Xr=G;function ei(r){throw new Error("process.binding is not supported")}function ti(){return"/"}function ri(r){throw new Error("process.chdir is not supported")}function ii(){return 0}var X=re.performance||{},ni=X.now||X.mozNow||X.msNow||X.oNow||X.webkitNow||function(){return new Date().getTime()};function oi(r){var e=ni.call(X)*.001,t=Math.floor(e),i=Math.floor(e%1*1e9);return r&&(t=t-r[0],i=i-r[1],i<0&&(t--,i+=1e9)),[t,i]}var ai=new Date;function si(){var r=new Date,e=r-ai;return e/1e3}var fe={nextTick:A,title:Ur,browser:Nr,env:jr,argv:Wr,version:Fr,versions:Hr,on:zr,addListener:Jr,once:Qr,off:Gr,removeListener:Kr,removeAllListeners:Zr,emit:Xr,binding:ei,cwd:ti,chdir:ri,umask:ii,hrtime:oi,platform:qr,release:Yr,config:Vr,uptime:si},xe;typeof Object.create=="function"?xe=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:xe=function(e,t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e};var ie=xe,li=/%[sdj%]/g;function ui(r){if(!je(r)){for(var e=[],t=0;t<arguments.length;t++)e.push(F(arguments[t]));return e.join(" ")}for(var t=1,i=arguments,n=i.length,o=String(r).replace(li,function(s){if(s==="%%")return"%";if(t>=n)return s;switch(s){case"%s":return String(i[t++]);case"%d":return Number(i[t++]);case"%j":try{return JSON.stringify(i[t++])}catch{return"[Circular]"}default:return s}}),a=i[t];t<n;a=i[++t])Ne(a)||!se(a)?o+=" "+a:o+=" "+F(a);return o}function Lt(r,e){if(j(re.process))return function(){return Lt(r,e).apply(this,arguments)};if(fe.noDeprecation===!0)return r;var t=!1;function i(){if(!t){if(fe.throwDeprecation)throw new Error(e);fe.traceDeprecation?console.trace(e):console.error(e),t=!0}return r.apply(this,arguments)}return i}var he={},Ae;function hi(r){if(j(Ae)&&(Ae=fe.env.NODE_DEBUG||""),r=r.toUpperCase(),!he[r])if(new RegExp("\\b"+r+"\\b","i").test(Ae)){var e=0;he[r]=function(){var t=ui.apply(null,arguments);console.error("%s %d: %s",r,e,t)}}else he[r]=function(){};return he[r]}function F(r,e){var t={seen:[],stylize:fi};return arguments.length>=3&&(t.depth=arguments[2]),arguments.length>=4&&(t.colors=arguments[3]),Mt(e)?t.showHidden=e:e&&yi(t,e),j(t.showHidden)&&(t.showHidden=!1),j(t.depth)&&(t.depth=2),j(t.colors)&&(t.colors=!1),j(t.customInspect)&&(t.customInspect=!0),t.colors&&(t.stylize=ci),me(t,r,t.depth)}F.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};F.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function ci(r,e){var t=F.styles[e];return t?"\x1B["+F.colors[t][0]+"m"+r+"\x1B["+F.colors[t][1]+"m":r}function fi(r,e){return r}function di(r){var e={};return r.forEach(function(t,i){e[t]=!0}),e}function me(r,e,t){if(r.customInspect&&e&&Me(e.inspect)&&e.inspect!==F&&!(e.constructor&&e.constructor.prototype===e)){var i=e.inspect(t,r);return je(i)||(i=me(r,i,t)),i}var n=pi(r,e);if(n)return n;var o=Object.keys(e),a=di(o);if(r.showHidden&&(o=Object.getOwnPropertyNames(e)),Le(e)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return Te(e);if(o.length===0){if(Me(e)){var s=e.name?": "+e.name:"";return r.stylize("[Function"+s+"]","special")}if(Ce(e))return r.stylize(RegExp.prototype.toString.call(e),"regexp");if(Qe(e))return r.stylize(Date.prototype.toString.call(e),"date");if(Le(e))return Te(e)}var l="",c=!1,f=["{","}"];if(vi(e)&&(c=!0,f=["[","]"]),Me(e)){var h=e.name?": "+e.name:"";l=" [Function"+h+"]"}if(Ce(e)&&(l=" "+RegExp.prototype.toString.call(e)),Qe(e)&&(l=" "+Date.prototype.toUTCString.call(e)),Le(e)&&(l=" "+Te(e)),o.length===0&&(!c||e.length==0))return f[0]+l+f[1];if(t<0)return Ce(e)?r.stylize(RegExp.prototype.toString.call(e),"regexp"):r.stylize("[Object]","special");r.seen.push(e);var d;return c?d=gi(r,e,t,a,o):d=o.map(function(p){return Pe(r,e,t,a,p,c)}),r.seen.pop(),mi(d,l,f)}function pi(r,e){if(j(e))return r.stylize("undefined","undefined");if(je(e)){var t="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return r.stylize(t,"string")}if(wi(e))return r.stylize(""+e,"number");if(Mt(e))return r.stylize(""+e,"boolean");if(Ne(e))return r.stylize("null","null")}function Te(r){return"["+Error.prototype.toString.call(r)+"]"}function gi(r,e,t,i,n){for(var o=[],a=0,s=e.length;a<s;++a)Ot(e,String(a))?o.push(Pe(r,e,t,i,String(a),!0)):o.push("");return n.forEach(function(l){l.match(/^\d+$/)||o.push(Pe(r,e,t,i,l,!0))}),o}function Pe(r,e,t,i,n,o){var a,s,l;if(l=Object.getOwnPropertyDescriptor(e,n)||{value:e[n]},l.get?l.set?s=r.stylize("[Getter/Setter]","special"):s=r.stylize("[Getter]","special"):l.set&&(s=r.stylize("[Setter]","special")),Ot(i,n)||(a="["+n+"]"),s||(r.seen.indexOf(l.value)<0?(Ne(t)?s=me(r,l.value,null):s=me(r,l.value,t-1),s.indexOf(`
`)>-1&&(o?s=s.split(`
`).map(function(c){return"  "+c}).join(`
`).substr(2):s=`
`+s.split(`
`).map(function(c){return"   "+c}).join(`
`))):s=r.stylize("[Circular]","special")),j(a)){if(o&&n.match(/^\d+$/))return s;a=JSON.stringify(""+n),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=r.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=r.stylize(a,"string"))}return a+": "+s}function mi(r,e,t){var i=r.reduce(function(n,o){return o.indexOf(`
`)>=0,n+o.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?t[0]+(e===""?"":e+`
 `)+" "+r.join(`,
  `)+" "+t[1]:t[0]+e+" "+r.join(", ")+" "+t[1]}function vi(r){return Array.isArray(r)}function Mt(r){return typeof r=="boolean"}function Ne(r){return r===null}function wi(r){return typeof r=="number"}function je(r){return typeof r=="string"}function j(r){return r===void 0}function Ce(r){return se(r)&&We(r)==="[object RegExp]"}function se(r){return typeof r=="object"&&r!==null}function Qe(r){return se(r)&&We(r)==="[object Date]"}function Le(r){return se(r)&&(We(r)==="[object Error]"||r instanceof Error)}function Me(r){return typeof r=="function"}function We(r){return Object.prototype.toString.call(r)}function yi(r,e){if(!e||!se(e))return r;for(var t=Object.keys(e),i=t.length;i--;)r[t[i]]=e[t[i]];return r}function Ot(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function K(){this.head=null,this.tail=null,this.length=0}K.prototype.push=function(r){var e={data:r,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length};K.prototype.unshift=function(r){var e={data:r,next:this.head};this.length===0&&(this.tail=e),this.head=e,++this.length};K.prototype.shift=function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}};K.prototype.clear=function(){this.head=this.tail=null,this.length=0};K.prototype.join=function(r){if(this.length===0)return"";for(var e=this.head,t=""+e.data;e=e.next;)t+=r+e.data;return t};K.prototype.concat=function(r){if(this.length===0)return u.alloc(0);if(this.length===1)return this.head.data;for(var e=u.allocUnsafe(r>>>0),t=this.head,i=0;t;)t.data.copy(e,i),i+=t.data.length,t=t.next;return e};var _i=u.isEncoding||function(r){switch(r&&r.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Ei(r){if(r&&!_i(r))throw new Error("Unknown encoding: "+r)}function le(r){switch(this.encoding=(r||"utf8").toLowerCase().replace(/[-_]/,""),Ei(r),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=Si;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=Ri;break;default:this.write=bi;return}this.charBuffer=new u(6),this.charReceived=0,this.charLength=0}le.prototype.write=function(r){for(var e="";this.charLength;){var t=r.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:r.length;if(r.copy(this.charBuffer,this.charReceived,0,t),this.charReceived+=t,this.charReceived<this.charLength)return"";r=r.slice(t,r.length),e=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var n=e.charCodeAt(e.length-1);if(n>=55296&&n<=56319){this.charLength+=this.surrogateSize,e="";continue}if(this.charReceived=this.charLength=0,r.length===0)return e;break}this.detectIncompleteChar(r);var i=r.length;this.charLength&&(r.copy(this.charBuffer,0,r.length-this.charReceived,i),i-=this.charReceived),e+=r.toString(this.encoding,0,i);var i=e.length-1,n=e.charCodeAt(i);if(n>=55296&&n<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),r.copy(this.charBuffer,0,0,o),e.substring(0,i)}return e};le.prototype.detectIncompleteChar=function(r){for(var e=r.length>=3?3:r.length;e>0;e--){var t=r[r.length-e];if(e==1&&t>>5==6){this.charLength=2;break}if(e<=2&&t>>4==14){this.charLength=3;break}if(e<=3&&t>>3==30){this.charLength=4;break}}this.charReceived=e};le.prototype.end=function(r){var e="";if(r&&r.length&&(e=this.write(r)),this.charReceived){var t=this.charReceived,i=this.charBuffer,n=this.encoding;e+=i.slice(0,t).toString(n)}return e};function bi(r){return r.toString(this.encoding)}function Si(r){this.charReceived=r.length%2,this.charLength=this.charReceived?2:0}function Ri(r){this.charReceived=r.length%3,this.charLength=this.charReceived?3:0}_.ReadableState=It;var v=hi("stream");ie(_,m);function Ai(r,e,t){if(typeof r.prependListener=="function")return r.prependListener(e,t);!r._events||!r._events[e]?r.on(e,t):Array.isArray(r._events[e])?r._events[e].unshift(t):r._events[e]=[t,r._events[e]]}function Ti(r,e){return r.listeners(e).length}function It(r,e){r=r||{},this.objectMode=!!r.objectMode,e instanceof L&&(this.objectMode=this.objectMode||!!r.readableObjectMode);var t=r.highWaterMark,i=this.objectMode?16:16*1024;this.highWaterMark=t||t===0?t:i,this.highWaterMark=~~this.highWaterMark,this.buffer=new K,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=r.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,r.encoding&&(this.decoder=new le(r.encoding),this.encoding=r.encoding)}function _(r){if(!(this instanceof _))return new _(r);this._readableState=new It(r,this),this.readable=!0,r&&typeof r.read=="function"&&(this._read=r.read),m.call(this)}_.prototype.push=function(r,e){var t=this._readableState;return!t.objectMode&&typeof r=="string"&&(e=e||t.defaultEncoding,e!==t.encoding&&(r=u.from(r,e),e="")),Dt(this,t,r,e,!1)};_.prototype.unshift=function(r){var e=this._readableState;return Dt(this,e,r,"",!0)};_.prototype.isPaused=function(){return this._readableState.flowing===!1};function Dt(r,e,t,i,n){var o=Mi(e,t);if(o)r.emit("error",o);else if(t===null)e.reading=!1,Oi(r,e);else if(e.objectMode||t&&t.length>0)if(e.ended&&!n){var a=new Error("stream.push() after EOF");r.emit("error",a)}else if(e.endEmitted&&n){var s=new Error("stream.unshift() after end event");r.emit("error",s)}else{var l;e.decoder&&!n&&!i&&(t=e.decoder.write(t),l=!e.objectMode&&t.length===0),n||(e.reading=!1),l||(e.flowing&&e.length===0&&!e.sync?(r.emit("data",t),r.read(0)):(e.length+=e.objectMode?1:t.length,n?e.buffer.unshift(t):e.buffer.push(t),e.needReadable&&Se(r))),Ii(r,e)}else n||(e.reading=!1);return Ci(e)}function Ci(r){return!r.ended&&(r.needReadable||r.length<r.highWaterMark||r.length===0)}_.prototype.setEncoding=function(r){return this._readableState.decoder=new le(r),this._readableState.encoding=r,this};var Ge=8388608;function Li(r){return r>=Ge?r=Ge:(r--,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r++),r}function Ke(r,e){return r<=0||e.length===0&&e.ended?0:e.objectMode?1:r!==r?e.flowing&&e.length?e.buffer.head.data.length:e.length:(r>e.highWaterMark&&(e.highWaterMark=Li(r)),r<=e.length?r:e.ended?e.length:(e.needReadable=!0,0))}_.prototype.read=function(r){v("read",r),r=parseInt(r,10);var e=this._readableState,t=r;if(r!==0&&(e.emittedReadable=!1),r===0&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return v("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?Oe(this):Se(this),null;if(r=Ke(r,e),r===0&&e.ended)return e.length===0&&Oe(this),null;var i=e.needReadable;v("need readable",i),(e.length===0||e.length-r<e.highWaterMark)&&(i=!0,v("length less than watermark",i)),e.ended||e.reading?(i=!1,v("reading or ended",i)):i&&(v("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(r=Ke(t,e)));var n;return r>0?n=$t(r,e):n=null,n===null?(e.needReadable=!0,r=0):e.length-=r,e.length===0&&(e.ended||(e.needReadable=!0),t!==r&&e.ended&&Oe(this)),n!==null&&this.emit("data",n),n};function Mi(r,e){var t=null;return!z(e)&&typeof e!="string"&&e!==null&&e!==void 0&&!r.objectMode&&(t=new TypeError("Invalid non-string/buffer chunk")),t}function Oi(r,e){if(!e.ended){if(e.decoder){var t=e.decoder.end();t&&t.length&&(e.buffer.push(t),e.length+=e.objectMode?1:t.length)}e.ended=!0,Se(r)}}function Se(r){var e=r._readableState;e.needReadable=!1,e.emittedReadable||(v("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?A(Ze,r):Ze(r))}function Ze(r){v("emit readable"),r.emit("readable"),Fe(r)}function Ii(r,e){e.readingMore||(e.readingMore=!0,A(Di,r,e))}function Di(r,e){for(var t=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(v("maybeReadMore read 0"),r.read(0),t!==e.length);)t=e.length;e.readingMore=!1}_.prototype._read=function(r){this.emit("error",new Error("not implemented"))};_.prototype.pipe=function(r,e){var t=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=r;break;case 1:i.pipes=[i.pipes,r];break;default:i.pipes.push(r);break}i.pipesCount+=1,v("pipe count=%d opts=%j",i.pipesCount,e);var n=!e||e.end!==!1,o=n?s:f;i.endEmitted?A(o):t.once("end",o),r.on("unpipe",a);function a(E){v("onunpipe"),E===t&&f()}function s(){v("onend"),r.end()}var l=$i(t);r.on("drain",l);var c=!1;function f(){v("cleanup"),r.removeListener("close",w),r.removeListener("finish",y),r.removeListener("drain",l),r.removeListener("error",p),r.removeListener("unpipe",a),t.removeListener("end",s),t.removeListener("end",f),t.removeListener("data",d),c=!0,i.awaitDrain&&(!r._writableState||r._writableState.needDrain)&&l()}var h=!1;t.on("data",d);function d(E){v("ondata"),h=!1;var I=r.write(E);I===!1&&!h&&((i.pipesCount===1&&i.pipes===r||i.pipesCount>1&&xt(i.pipes,r)!==-1)&&!c&&(v("false write response, pause",t._readableState.awaitDrain),t._readableState.awaitDrain++,h=!0),t.pause())}function p(E){v("onerror",E),T(),r.removeListener("error",p),Ti(r,"error")===0&&r.emit("error",E)}Ai(r,"error",p);function w(){r.removeListener("finish",y),T()}r.once("close",w);function y(){v("onfinish"),r.removeListener("close",w),T()}r.once("finish",y);function T(){v("unpipe"),t.unpipe(r)}return r.emit("pipe",t),i.flowing||(v("pipe resume"),t.resume()),r};function $i(r){return function(){var e=r._readableState;v("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,e.awaitDrain===0&&r.listeners("data").length&&(e.flowing=!0,Fe(r))}}_.prototype.unpipe=function(r){var e=this._readableState;if(e.pipesCount===0)return this;if(e.pipesCount===1)return r&&r!==e.pipes?this:(r||(r=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,r&&r.emit("unpipe",this),this);if(!r){var t=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var n=0;n<i;n++)t[n].emit("unpipe",this);return this}var o=xt(e.pipes,r);return o===-1?this:(e.pipes.splice(o,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),r.emit("unpipe",this),this)};_.prototype.on=function(r,e){var t=m.prototype.on.call(this,r,e);if(r==="data")this._readableState.flowing!==!1&&this.resume();else if(r==="readable"){var i=this._readableState;!i.endEmitted&&!i.readableListening&&(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&Se(this):A(xi,this))}return t};_.prototype.addListener=_.prototype.on;function xi(r){v("readable nexttick read 0"),r.read(0)}_.prototype.resume=function(){var r=this._readableState;return r.flowing||(v("resume"),r.flowing=!0,Pi(this,r)),this};function Pi(r,e){e.resumeScheduled||(e.resumeScheduled=!0,A(Bi,r,e))}function Bi(r,e){e.reading||(v("resume read 0"),r.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,r.emit("resume"),Fe(r),e.flowing&&!e.reading&&r.read(0)}_.prototype.pause=function(){return v("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(v("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function Fe(r){var e=r._readableState;for(v("flow",e.flowing);e.flowing&&r.read()!==null;);}_.prototype.wrap=function(r){var e=this._readableState,t=!1,i=this;r.on("end",function(){if(v("wrapped end"),e.decoder&&!e.ended){var a=e.decoder.end();a&&a.length&&i.push(a)}i.push(null)}),r.on("data",function(a){if(v("wrapped data"),e.decoder&&(a=e.decoder.write(a)),!(e.objectMode&&a==null)&&!(!e.objectMode&&(!a||!a.length))){var s=i.push(a);s||(t=!0,r.pause())}});for(var n in r)this[n]===void 0&&typeof r[n]=="function"&&(this[n]=function(a){return function(){return r[a].apply(r,arguments)}}(n));var o=["error","close","destroy","pause","resume"];return ji(o,function(a){r.on(a,i.emit.bind(i,a))}),i._read=function(a){v("wrapped _read",a),t&&(t=!1,r.resume())},i};_._fromList=$t;function $t(r,e){if(e.length===0)return null;var t;return e.objectMode?t=e.buffer.shift():!r||r>=e.length?(e.decoder?t=e.buffer.join(""):e.buffer.length===1?t=e.buffer.head.data:t=e.buffer.concat(e.length),e.buffer.clear()):t=ki(r,e.buffer,e.decoder),t}function ki(r,e,t){var i;return r<e.head.data.length?(i=e.head.data.slice(0,r),e.head.data=e.head.data.slice(r)):r===e.head.data.length?i=e.shift():i=t?Ui(r,e):qi(r,e),i}function Ui(r,e){var t=e.head,i=1,n=t.data;for(r-=n.length;t=t.next;){var o=t.data,a=r>o.length?o.length:r;if(a===o.length?n+=o:n+=o.slice(0,r),r-=a,r===0){a===o.length?(++i,t.next?e.head=t.next:e.head=e.tail=null):(e.head=t,t.data=o.slice(a));break}++i}return e.length-=i,n}function qi(r,e){var t=u.allocUnsafe(r),i=e.head,n=1;for(i.data.copy(t),r-=i.data.length;i=i.next;){var o=i.data,a=r>o.length?o.length:r;if(o.copy(t,t.length-r,0,a),r-=a,r===0){a===o.length?(++n,i.next?e.head=i.next:e.head=e.tail=null):(e.head=i,i.data=o.slice(a));break}++n}return e.length-=n,t}function Oe(r){var e=r._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,A(Ni,e,r))}function Ni(r,e){!r.endEmitted&&r.length===0&&(r.endEmitted=!0,e.readable=!1,e.emit("end"))}function ji(r,e){for(var t=0,i=r.length;t<i;t++)e(r[t],t)}function xt(r,e){for(var t=0,i=r.length;t<i;t++)if(r[t]===e)return t;return-1}S.WritableState=He;ie(S,m);function Wi(){}function Fi(r,e,t){this.chunk=r,this.encoding=e,this.callback=t,this.next=null}function He(r,e){Object.defineProperty(this,"buffer",{get:Lt(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),r=r||{},this.objectMode=!!r.objectMode,e instanceof L&&(this.objectMode=this.objectMode||!!r.writableObjectMode);var t=r.highWaterMark,i=this.objectMode?16:16*1024;this.highWaterMark=t||t===0?t:i,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var n=r.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=r.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(o){Gi(e,o)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new Ut(this)}He.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t};function S(r){if(!(this instanceof S)&&!(this instanceof L))return new S(r);this._writableState=new He(r,this),this.writable=!0,r&&(typeof r.write=="function"&&(this._write=r.write),typeof r.writev=="function"&&(this._writev=r.writev)),m.call(this)}S.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function Hi(r,e){var t=new Error("write after end");r.emit("error",t),A(e,t)}function Yi(r,e,t,i){var n=!0,o=!1;return t===null?o=new TypeError("May not write null values to stream"):!u.isBuffer(t)&&typeof t!="string"&&t!==void 0&&!e.objectMode&&(o=new TypeError("Invalid non-string/buffer chunk")),o&&(r.emit("error",o),A(i,o),n=!1),n}S.prototype.write=function(r,e,t){var i=this._writableState,n=!1;return typeof e=="function"&&(t=e,e=null),u.isBuffer(r)?e="buffer":e||(e=i.defaultEncoding),typeof t!="function"&&(t=Wi),i.ended?Hi(this,t):Yi(this,i,r,t)&&(i.pendingcb++,n=zi(this,i,r,e,t)),n};S.prototype.cork=function(){var r=this._writableState;r.corked++};S.prototype.uncork=function(){var r=this._writableState;r.corked&&(r.corked--,!r.writing&&!r.corked&&!r.finished&&!r.bufferProcessing&&r.bufferedRequest&&Pt(this,r))};S.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this};function Vi(r,e,t){return!r.objectMode&&r.decodeStrings!==!1&&typeof e=="string"&&(e=u.from(e,t)),e}function zi(r,e,t,i,n){t=Vi(e,t,i),u.isBuffer(t)&&(i="buffer");var o=e.objectMode?1:t.length;e.length+=o;var a=e.length<e.highWaterMark;if(a||(e.needDrain=!0),e.writing||e.corked){var s=e.lastBufferedRequest;e.lastBufferedRequest=new Fi(t,i,n),s?s.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else Be(r,e,!1,o,t,i,n);return a}function Be(r,e,t,i,n,o,a){e.writelen=i,e.writecb=a,e.writing=!0,e.sync=!0,t?r._writev(n,e.onwrite):r._write(n,o,e.onwrite),e.sync=!1}function Ji(r,e,t,i,n){--e.pendingcb,t?A(n,i):n(i),r._writableState.errorEmitted=!0,r.emit("error",i)}function Qi(r){r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0}function Gi(r,e){var t=r._writableState,i=t.sync,n=t.writecb;if(Qi(t),e)Ji(r,t,i,e,n);else{var o=Bt(t);!o&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&Pt(r,t),i?A(Xe,r,t,o,n):Xe(r,t,o,n)}}function Xe(r,e,t,i){t||Ki(r,e),e.pendingcb--,i(),kt(r,e)}function Ki(r,e){e.length===0&&e.needDrain&&(e.needDrain=!1,r.emit("drain"))}function Pt(r,e){e.bufferProcessing=!0;var t=e.bufferedRequest;if(r._writev&&t&&t.next){var i=e.bufferedRequestCount,n=new Array(i),o=e.corkedRequestsFree;o.entry=t;for(var a=0;t;)n[a]=t,t=t.next,a+=1;Be(r,e,!0,e.length,n,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new Ut(e)}else{for(;t;){var s=t.chunk,l=t.encoding,c=t.callback,f=e.objectMode?1:s.length;if(Be(r,e,!1,f,s,l,c),t=t.next,e.writing)break}t===null&&(e.lastBufferedRequest=null)}e.bufferedRequestCount=0,e.bufferedRequest=t,e.bufferProcessing=!1}S.prototype._write=function(r,e,t){t(new Error("not implemented"))};S.prototype._writev=null;S.prototype.end=function(r,e,t){var i=this._writableState;typeof r=="function"?(t=r,r=null,e=null):typeof e=="function"&&(t=e,e=null),r!=null&&this.write(r,e),i.corked&&(i.corked=1,this.uncork()),!i.ending&&!i.finished&&Zi(this,i,t)};function Bt(r){return r.ending&&r.length===0&&r.bufferedRequest===null&&!r.finished&&!r.writing}function et(r,e){e.prefinished||(e.prefinished=!0,r.emit("prefinish"))}function kt(r,e){var t=Bt(e);return t&&(e.pendingcb===0?(et(r,e),e.finished=!0,r.emit("finish")):et(r,e)),t}function Zi(r,e,t){e.ending=!0,kt(r,e),t&&(e.finished?A(t):r.once("finish",t)),e.ended=!0,r.writable=!1}function Ut(r){var e=this;this.next=null,this.entry=null,this.finish=function(t){var i=e.entry;for(e.entry=null;i;){var n=i.callback;r.pendingcb--,n(t),i=i.next}r.corkedRequestsFree?r.corkedRequestsFree.next=e:r.corkedRequestsFree=e}}ie(L,_);var tt=Object.keys(S.prototype);for(var Ie=0;Ie<tt.length;Ie++){var De=tt[Ie];L.prototype[De]||(L.prototype[De]=S.prototype[De])}function L(r){if(!(this instanceof L))return new L(r);_.call(this,r),S.call(this,r),r&&r.readable===!1&&(this.readable=!1),r&&r.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,r&&r.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",Xi)}function Xi(){this.allowHalfOpen||this._writableState.ended||A(en,this)}function en(r){r.end()}ie(O,L);function tn(r){this.afterTransform=function(e,t){return rn(r,e,t)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function rn(r,e,t){var i=r._transformState;i.transforming=!1;var n=i.writecb;if(!n)return r.emit("error",new Error("no writecb in Transform class"));i.writechunk=null,i.writecb=null,t!=null&&r.push(t),n(e);var o=r._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&r._read(o.highWaterMark)}function O(r){if(!(this instanceof O))return new O(r);L.call(this,r),this._transformState=new tn(this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,r&&(typeof r.transform=="function"&&(this._transform=r.transform),typeof r.flush=="function"&&(this._flush=r.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(t){rt(e,t)}):rt(e)})}O.prototype.push=function(r,e){return this._transformState.needTransform=!1,L.prototype.push.call(this,r,e)};O.prototype._transform=function(r,e,t){throw new Error("Not implemented")};O.prototype._write=function(r,e,t){var i=this._transformState;if(i.writecb=t,i.writechunk=r,i.writeencoding=e,!i.transforming){var n=this._readableState;(i.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}};O.prototype._read=function(r){var e=this._transformState;e.writechunk!==null&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};function rt(r,e){if(e)return r.emit("error",e);var t=r._writableState,i=r._transformState;if(t.length)throw new Error("Calling transform done when ws.length != 0");if(i.transforming)throw new Error("Calling transform done when still transforming");return r.push(null)}ie(oe,O);function oe(r){if(!(this instanceof oe))return new oe(r);O.call(this,r)}oe.prototype._transform=function(r,e,t){t(null,r)};ie(U,m);U.Readable=_;U.Writable=S;U.Duplex=L;U.Transform=O;U.PassThrough=oe;U.Stream=U;function U(){m.call(this)}U.prototype.pipe=function(r,e){var t=this;function i(f){r.writable&&r.write(f)===!1&&t.pause&&t.pause()}t.on("data",i);function n(){t.readable&&t.resume&&t.resume()}r.on("drain",n),!r._isStdio&&(!e||e.end!==!1)&&(t.on("end",a),t.on("close",s));var o=!1;function a(){o||(o=!0,r.end())}function s(){o||(o=!0,typeof r.destroy=="function"&&r.destroy())}function l(f){if(c(),m.listenerCount(this,"error")===0)throw f}t.on("error",l),r.on("error",l);function c(){t.removeListener("data",i),r.removeListener("drain",n),t.removeListener("end",a),t.removeListener("close",s),t.removeListener("error",l),r.removeListener("error",l),t.removeListener("end",c),t.removeListener("close",c),r.removeListener("close",c)}return t.on("end",c),t.on("close",c),r.on("close",c),r.emit("pipe",t),r};class Q extends Error{constructor(e,t,...i){Array.isArray(t)&&(t=t.join(" ")),super(t),Error.captureStackTrace!==void 0&&Error.captureStackTrace(this,Q),this.code=e;for(const n of i)for(const o in n){const a=n[o];this[o]=z(a)?a.toString():a==null?a:JSON.parse(JSON.stringify(a))}}}const qt=function(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)},nn=46,on=/\\(\\)?/g,an=RegExp(`[^.[\\]]+|\\[(?:([^"'][^[]*)|(["'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))`,"g"),sn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ln=/^\w*$/,un=function(r){return Object.prototype.toString.call(r)},Nt=function(r){const e=typeof r;return e==="symbol"||e==="object"&&r&&un(r)==="[object Symbol]"},hn=function(r,e){if(Array.isArray(r))return!1;const t=typeof r;return t==="number"||t==="symbol"||t==="boolean"||!r||Nt(r)?!0:ln.test(r)||!sn.test(r)||e!=null&&r in Object(e)},cn=function(r){const e=[];return r.charCodeAt(0)===nn&&e.push(""),r.replace(an,function(t,i,n,o){let a=t;n?a=o.replace(on,"$1"):i&&(a=i.trim()),e.push(a)}),e},fn=function(r,e){return Array.isArray(r)?r:hn(r,e)?[r]:cn(r)},dn=function(r){if(typeof r=="string"||Nt(r))return r;const e=`${r}`;return e=="0"&&1/r==-INFINITY?"-0":e},pn=function(r,e){e=fn(e,r);let t=0;const i=e.length;for(;r!=null&&t<i;)r=r[dn(e[t++])];return t&&t===i?r:void 0},jt=function(r){if(r==null)return[void 0,void 0];if(typeof r!="object")return[Error('Invalid option "columns": expect an array or an object')];if(Array.isArray(r)){const e=[];for(const t of r)if(typeof t=="string")e.push({key:t,header:t});else if(typeof t=="object"&&t!==null&&!Array.isArray(t)){if(!t.key)return[Error('Invalid column definition: property "key" is required')];t.header===void 0&&(t.header=t.key),e.push(t)}else return[Error("Invalid column definition: expect a string or an object")];r=e}else{const e=[];for(const t in r)e.push({key:t,header:r[t]});r=e}return[void 0,r]},gn=function(r){return r.replace(/([A-Z])/g,function(e,t){return"_"+t.toLowerCase()})},Wt=function(r){const e={};for(const n in r)e[gn(n)]=r[n];if(e.bom===void 0||e.bom===null||e.bom===!1)e.bom=!1;else if(e.bom!==!0)return[new Q("CSV_OPTION_BOOLEAN_INVALID_TYPE",["option `bom` is optional and must be a boolean value,",`got ${JSON.stringify(e.bom)}`])];if(e.delimiter===void 0||e.delimiter===null)e.delimiter=",";else if(z(e.delimiter))e.delimiter=e.delimiter.toString();else if(typeof e.delimiter!="string")return[new Q("CSV_OPTION_DELIMITER_INVALID_TYPE",["option `delimiter` must be a buffer or a string,",`got ${JSON.stringify(e.delimiter)}`])];if(e.quote===void 0||e.quote===null)e.quote='"';else if(e.quote===!0)e.quote='"';else if(e.quote===!1)e.quote="";else if(z(e.quote))e.quote=e.quote.toString();else if(typeof e.quote!="string")return[new Q("CSV_OPTION_QUOTE_INVALID_TYPE",["option `quote` must be a boolean, a buffer or a string,",`got ${JSON.stringify(e.quote)}`])];if((e.quoted===void 0||e.quoted===null)&&(e.quoted=!1),e.escape_formulas===void 0||e.escape_formulas===null)e.escape_formulas=!1;else if(typeof e.escape_formulas!="boolean")return[new Q("CSV_OPTION_ESCAPE_FORMULAS_INVALID_TYPE",["option `escape_formulas` must be a boolean,",`got ${JSON.stringify(e.escape_formulas)}`])];if((e.quoted_empty===void 0||e.quoted_empty===null)&&(e.quoted_empty=void 0),e.quoted_match===void 0||e.quoted_match===null||e.quoted_match===!1?e.quoted_match=null:Array.isArray(e.quoted_match)||(e.quoted_match=[e.quoted_match]),e.quoted_match)for(const n of e.quoted_match){const o=typeof n=="string",a=n instanceof RegExp;if(!o&&!a)return[Error(`Invalid Option: quoted_match must be a string or a regex, got ${JSON.stringify(n)}`)]}if((e.quoted_string===void 0||e.quoted_string===null)&&(e.quoted_string=!1),(e.eof===void 0||e.eof===null)&&(e.eof=!0),e.escape===void 0||e.escape===null)e.escape='"';else if(z(e.escape))e.escape=e.escape.toString();else if(typeof e.escape!="string")return[Error(`Invalid Option: escape must be a buffer or a string, got ${JSON.stringify(e.escape)}`)];if(e.escape.length>1)return[Error(`Invalid Option: escape must be one character, got ${e.escape.length} characters`)];(e.header===void 0||e.header===null)&&(e.header=!1);const[t,i]=jt(e.columns);if(t!==void 0)return[t];if(e.columns=i,(e.quoted===void 0||e.quoted===null)&&(e.quoted=!1),(e.cast===void 0||e.cast===null)&&(e.cast={}),(e.cast.bigint===void 0||e.cast.bigint===null)&&(e.cast.bigint=n=>""+n),(e.cast.boolean===void 0||e.cast.boolean===null)&&(e.cast.boolean=n=>n?"1":""),(e.cast.date===void 0||e.cast.date===null)&&(e.cast.date=n=>""+n.getTime()),(e.cast.number===void 0||e.cast.number===null)&&(e.cast.number=n=>""+n),(e.cast.object===void 0||e.cast.object===null)&&(e.cast.object=n=>JSON.stringify(n)),(e.cast.string===void 0||e.cast.string===null)&&(e.cast.string=function(n){return n}),e.on_record!==void 0&&typeof e.on_record!="function")return[Error('Invalid Option: "on_record" must be a function.')];if(e.record_delimiter===void 0||e.record_delimiter===null)e.record_delimiter=`
`;else if(z(e.record_delimiter))e.record_delimiter=e.record_delimiter.toString();else if(typeof e.record_delimiter!="string")return[Error(`Invalid Option: record_delimiter must be a buffer or a string, got ${JSON.stringify(e.record_delimiter)}`)];switch(e.record_delimiter){case"unix":e.record_delimiter=`
`;break;case"mac":e.record_delimiter="\r";break;case"windows":e.record_delimiter=`\r
`;break;case"ascii":e.record_delimiter="";break;case"unicode":e.record_delimiter="\u2028";break}return[void 0,e]},mn=u.from([239,187,191]),vn=function(r,e,t){return{options:r,state:e,info:t,__transform:function(i,n){if(!Array.isArray(i)&&typeof i!="object")return Error(`Invalid Record: expect an array or an object, got ${JSON.stringify(i)}`);if(this.info.records===0){if(Array.isArray(i)){if(this.options.header===!0&&this.options.columns===void 0)return Error("Undiscoverable Columns: header option requires column option or object records")}else if(this.options.columns===void 0){const[s,l]=jt(Object.keys(i));if(s)return;this.options.columns=l}}if(this.info.records===0){this.bom(n);const s=this.headers(n);if(s)return s}try{this.options.on_record&&this.options.on_record(i,this.info.records)}catch(s){return s}let o,a;if(this.options.eof){if([o,a]=this.stringify(i),o)return o;if(a===void 0)return;a=a+this.options.record_delimiter}else{if([o,a]=this.stringify(i),o)return o;if(a===void 0)return;(this.options.header||this.info.records)&&(a=this.options.record_delimiter+a)}this.info.records++,n(a)},stringify:function(i,n=!1){if(typeof i!="object")return[void 0,i];const{columns:o}=this.options,a=[];if(Array.isArray(i)){o&&i.splice(o.length);for(let l=0;l<i.length;l++){const c=i[l],[f,h]=this.__cast(c,{index:l,column:l,records:this.info.records,header:n});if(f)return[f];a[l]=[h,c]}}else for(let l=0;l<o.length;l++){const c=pn(i,o[l].key),[f,h]=this.__cast(c,{index:l,column:o[l].key,records:this.info.records,header:n});if(f)return[f];a[l]=[h,c]}let s="";for(let l=0;l<a.length;l++){let c,f,[h,d]=a[l];if(typeof h=="string")c=this.options;else if(qt(h)){if(c=h,h=c.value,delete c.value,typeof h!="string"&&h!==void 0&&h!==null&&f)return[Error(`Invalid Casting Value: returned value must return a string, null or undefined, got ${JSON.stringify(h)}`)];if(c={...this.options,...c},[f,c]=Wt(c),f!==void 0)return[f]}else if(h==null)c=this.options;else return[Error(`Invalid Casting Value: returned value must return a string, an object, null or undefined, got ${JSON.stringify(h)}`)];const{delimiter:p,escape:w,quote:y,quoted:T,quoted_empty:E,quoted_string:I,quoted_match:D,record_delimiter:$,escape_formulas:Ht}=c;if(h===""&&d===""){let Z=D&&D.filter(ne=>typeof ne=="string"?h.indexOf(ne)!==-1:ne.test(h));Z=Z&&Z.length>0,(Z||E===!0||I===!0&&E!==!1)===!0&&(h=y+h+y),s+=h}else if(h){if(typeof h!="string")return[Error(`Formatter must return a string, null or undefined, got ${JSON.stringify(h)}`)];const Z=p.length&&h.indexOf(p)>=0,Re=y!==""&&h.indexOf(y)>=0,ne=h.indexOf(w)>=0&&w!==y,Yt=h.indexOf($)>=0,Vt=I&&typeof d=="string";let ue=D&&D.filter(H=>typeof H=="string"?h.indexOf(H)!==-1:H.test(h));if(ue=ue&&ue.length>0,Ht)switch(h[0]){case"=":case"+":case"-":case"@":case"	":case"\r":case"":case"":case"":case"":h=`'${h}`;break}const Ye=Re===!0||Z||Yt||T||Vt||ue;if(Ye===!0&&ne===!0){const H=w==="\\"?new RegExp(w+w,"g"):new RegExp(w,"g");h=h.replace(H,w+w)}if(Re===!0){const H=new RegExp(y,"g");h=h.replace(H,w+y)}Ye===!0&&(h=y+h+y),s+=h}else(E===!0||d===""&&I===!0&&E!==!1)&&(s+=y+y);l!==a.length-1&&(s+=p)}return[void 0,s]},bom:function(i){this.options.bom===!0&&i(mn)},headers:function(i){if(this.options.header===!1||this.options.columns===void 0)return;let n,o=this.options.columns.map(a=>a.header);if(this.options.eof?([n,o]=this.stringify(o,!0),o+=this.options.record_delimiter):[n,o]=this.stringify(o),n)return n;i(o)},__cast:function(i,n){const o=typeof i;try{return o==="string"?[void 0,this.options.cast.string(i,n)]:o==="bigint"?[void 0,this.options.cast.bigint(i,n)]:o==="number"?[void 0,this.options.cast.number(i,n)]:o==="boolean"?[void 0,this.options.cast.boolean(i,n)]:i instanceof Date?[void 0,this.options.cast.date(i,n)]:o==="object"&&i!==null?[void 0,this.options.cast.object(i,n)]:[void 0,i,i]}catch(a){return[a]}}}};class wn extends O{constructor(e={}){super({writableObjectMode:!0,...e});const[t,i]=Wt(e);if(t!==void 0)throw t;this.options=i,this.state={stop:!1},this.info={records:0},this.api=vn(this.options,this.state,this.info),this.api.options.on_record=(...n)=>{this.emit("record",...n)}}_transform(e,t,i){if(this.state.stop===!0)return;const n=this.api.__transform(e,this.push.bind(this));n!==void 0&&(this.state.stop=!0),i(n)}_flush(e){if(this.state.stop!==!0){if(this.info.records===0){this.api.bom(this.push.bind(this));const t=this.api.headers(this.push.bind(this));t&&e(t)}e()}}}const yn=function(){let r,e,t;for(const n in arguments){const o=arguments[n],a=typeof o;if(r===void 0&&Array.isArray(o))r=o;else if(e===void 0&&qt(o))e=o;else if(t===void 0&&a==="function")t=o;else throw new Q("CSV_INVALID_ARGUMENT",["Invalid argument:",`got ${JSON.stringify(o)} at index ${n}`])}const i=new wn(e);if(t){const n=[];i.on("readable",function(){let o;for(;(o=this.read())!==null;)n.push(o)}),i.on("error",function(o){t(o)}),i.on("end",function(){try{t(void 0,n.join(""))}catch(o){t(o);return}})}if(r!==void 0){const n=function(){for(const o of r)i.write(o);i.end()};typeof setImmediate=="function"?setImmediate(n):setTimeout(n,0)}return i},ve=ee("results");class _n{constructor(e,t){Y(this,"_name");Y(this,"_points");Y(this,"html");this._name=e,this._points=t,this.html=ve.insertRow(-1);const i=this.html.insertCell(0);i.innerText=e;const n=this.html.insertCell(1);n.innerHTML=`<input type="number" id="points-${e}" value="${t}" />`;const o=this.html.insertCell(2);o.innerHTML=`<span id="remove-${e}" class="remove-name">x</span>`;let a=this;ee(`points-${e}`).addEventListener("input",function(s){a._points=parseInt(s.currentTarget.value)}),ee(`remove-${e}`).addEventListener("click",function(){M.remove(e)})}increment(){this._points+=1,ee(`points-${this._name}`).value=this._points.toString()}set points(e){this._points=e}get points(){return this._points}get name(){return this._name}get row(){return this.html}get data(){return[this._name,this._points]}}class En{constructor(){Y(this,"_items",[]);Y(this,"_sort","no");Y(this,"_ascending_order",!0)}to_array(){return this._items.map(e=>e.data)}add(e,t){const i=new _n(e,t);return this._items.push(i),i}increment(e){(this._items.find(i=>i.name===e)??this.add(e,0)).increment()}remove(e){this._items=this._items.filter(t=>t.name!==e),this.generate()}generate(){ve.innerHTML="",Ft(this._sort,this._ascending_order),this._items.forEach(e=>{ve.append(e.row)})}sort(e,t){this._sort=t,this._ascending_order=e,this._items.sort((i,n)=>t==="points"?e?i.points-n.points:n.points-i.points:e?i.name>n.name?1:-1:n.name>i.name?1:-1),this.generate()}}function bn(r,e){M.sort(r,e)}function it(r,e,t){const i=`<span id="header-caret-up-${e}" onclick="sort_table(true, '${e}')"></span>`,n=`<span id="header-caret-down-${e}" onclick="sort_table(false, '${e}')"></span>`;return r==="no"||r!==e?` ${i} ${n}`:t?` ${n}`:` ${i}`}function Ft(r,e){const t=ve.insertRow(0),i=it(r,"names",e),n=it(r,"points",e);t.innerHTML=`<th>Noms${i}</th><th>Points${n}</th><th>Supprimer</th>`,console.log(r,e)}const we=new FileReader,de=new nt("#dropzone-file",{acceptedFiles:"text/csv"});de.accept=(r,e)=>{we.addEventListener("loadend",function(t){r.status=nt.SUCCESS,de.emit("success",r),de.emit("complete",r)})};de.on("addedfile",r=>{console.log(`File added: ${r.name}`),(r.type?r.type:"Not_found").includes("csv")?we.readAsText(r):console.log("File error")});we.addEventListener("load",r=>{const e=we.result??"";typeof e!="string"||e===""?console.log("File error: content unrecognized"):Gt(e,{bom:!0,delimiter:";"}).map(function(i){return[i[0],i[1]]}).filter(function(i){return i[0].trim().length>0}).forEach(i=>M.add(i[0],parseInt(i[1])))});ee("save-results-button").addEventListener("click",()=>{yn(M.to_array(),{delimiter:";"},function(r,e){if(r){console.log(r);return}console.log(e);const t=new Blob([e],{type:"text/csv"}),i=document.createElement("a");i.download=ee("save-results-input").value+".csv",i.href=window.URL.createObjectURL(t),i.dataset.downloadurl=["text/csv",i.download,i.href].join(":");const n=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});i.dispatchEvent(n),i.remove()})});let M=new En;const Sn=new g(document.querySelector("#qr-video"),r=>{console.log("decoded: ",r),M.increment(r.data)},{maxScansPerSecond:1,highlightScanRegion:!0,highlightCodeOutline:!0});Ft("no",!0);Sn.start();window.sort_table=bn;window.fill_table=function(){M.increment("Marie Boucher"),M.increment("Yov Cohen"),M.increment("Nasra Hamdullah"),M.increment("Park Jung-un"),M.increment("Papadiamantopoulos Mikhail"),["Saadi Lesroses","Clmence Eaux","John Tole-Kin","Clo Ptolme","Erik Lerouge","Ram De Cesse"].forEach(r=>M.increment(r))};
