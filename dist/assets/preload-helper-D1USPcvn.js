var re=typeof window<"u"?window:typeof self<"u"?self:typeof window<"u"?window:{},x=[],T=[],De=typeof Uint8Array<"u"?Uint8Array:Array,Z=!1;function pe(){Z=!0;for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,t=r.length;e<t;++e)x[e]=r[e],T[r.charCodeAt(e)]=e;T[45]=62,T[95]=63}function ze(r){Z||pe();var e,t,i,n,s,o,l=r.length;if(l%4>0)throw new Error("Invalid string. Length must be a multiple of 4");s=r[l-2]==="="?2:r[l-1]==="="?1:0,o=new De(l*3/4-s),i=s>0?l-4:l;var a=0;for(e=0,t=0;e<i;e+=4,t+=3)n=T[r.charCodeAt(e)]<<18|T[r.charCodeAt(e+1)]<<12|T[r.charCodeAt(e+2)]<<6|T[r.charCodeAt(e+3)],o[a++]=n>>16&255,o[a++]=n>>8&255,o[a++]=n&255;return s===2?(n=T[r.charCodeAt(e)]<<2|T[r.charCodeAt(e+1)]>>4,o[a++]=n&255):s===1&&(n=T[r.charCodeAt(e)]<<10|T[r.charCodeAt(e+1)]<<4|T[r.charCodeAt(e+2)]>>2,o[a++]=n>>8&255,o[a++]=n&255),o}function Me(r){return x[r>>18&63]+x[r>>12&63]+x[r>>6&63]+x[r&63]}function Be(r,e,t){for(var i,n=[],s=e;s<t;s+=3)i=(r[s]<<16)+(r[s+1]<<8)+r[s+2],n.push(Me(i));return n.join("")}function ne(r){Z||pe();for(var e,t=r.length,i=t%3,n="",s=[],o=16383,l=0,a=t-i;l<a;l+=o)s.push(Be(r,l,l+o>a?a:l+o));return i===1?(e=r[t-1],n+=x[e>>2],n+=x[e<<4&63],n+="=="):i===2&&(e=(r[t-2]<<8)+r[t-1],n+=x[e>>10],n+=x[e>>4&63],n+=x[e<<2&63],n+="="),s.push(n),s.join("")}function J(r,e,t,i,n){var s,o,l=n*8-i-1,a=(1<<l)-1,h=a>>1,c=-7,d=t?n-1:0,m=t?-1:1,p=r[e+d];for(d+=m,s=p&(1<<-c)-1,p>>=-c,c+=l;c>0;s=s*256+r[e+d],d+=m,c-=8);for(o=s&(1<<-c)-1,s>>=-c,c+=i;c>0;o=o*256+r[e+d],d+=m,c-=8);if(s===0)s=1-h;else{if(s===a)return o?NaN:(p?-1:1)*(1/0);o=o+Math.pow(2,i),s=s-h}return(p?-1:1)*o*Math.pow(2,s-i)}function me(r,e,t,i,n,s){var o,l,a,h=s*8-n-1,c=(1<<h)-1,d=c>>1,m=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:s-1,I=i?1:-1,y=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(l=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(a=Math.pow(2,-o))<1&&(o--,a*=2),o+d>=1?e+=m/a:e+=m*Math.pow(2,1-d),e*a>=2&&(o++,a/=2),o+d>=c?(l=0,o=c):o+d>=1?(l=(e*a-1)*Math.pow(2,n),o=o+d):(l=e*Math.pow(2,d-1)*Math.pow(2,n),o=0));n>=8;r[t+p]=l&255,p+=I,l/=256,n-=8);for(o=o<<n|l,h+=n;h>0;r[t+p]=o&255,p+=I,o/=256,h-=8);r[t+p-I]|=y*128}var Pe={}.toString,ge=Array.isArray||function(r){return Pe.call(r)=="[object Array]"},qe=50;u.TYPED_ARRAY_SUPPORT=re.TYPED_ARRAY_SUPPORT!==void 0?re.TYPED_ARRAY_SUPPORT:!0;V();function V(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function U(r,e){if(V()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(r=new Uint8Array(e),r.__proto__=u.prototype):(r===null&&(r=new u(e)),r.length=e),r}function u(r,e,t){if(!u.TYPED_ARRAY_SUPPORT&&!(this instanceof u))return new u(r,e,t);if(typeof r=="number"){if(typeof e=="string")throw new Error("If encoding is specified then the first argument must be a string");return ee(this,r)}return _e(this,r,e,t)}u.poolSize=8192;u._augment=function(r){return r.__proto__=u.prototype,r};function _e(r,e,t,i){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer?Ve(r,e,t,i):typeof e=="string"?Qe(r,e,t):He(r,e)}u.from=function(r,e,t){return _e(null,r,e,t)};u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&u[Symbol.species]);function we(r){if(typeof r!="number")throw new TypeError('"size" argument must be a number');if(r<0)throw new RangeError('"size" argument must not be negative')}function Ye(r,e,t,i){return we(e),e<=0?U(r,e):t!==void 0?typeof i=="string"?U(r,e).fill(t,i):U(r,e).fill(t):U(r,e)}u.alloc=function(r,e,t){return Ye(null,r,e,t)};function ee(r,e){if(we(e),r=U(r,e<0?0:te(e)|0),!u.TYPED_ARRAY_SUPPORT)for(var t=0;t<e;++t)r[t]=0;return r}u.allocUnsafe=function(r){return ee(null,r)};u.allocUnsafeSlow=function(r){return ee(null,r)};function Qe(r,e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!u.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');var i=ve(e,t)|0;r=U(r,i);var n=r.write(e,t);return n!==i&&(r=r.slice(0,n)),r}function K(r,e){var t=e.length<0?0:te(e.length)|0;r=U(r,t);for(var i=0;i<t;i+=1)r[i]=e[i]&255;return r}function Ve(r,e,t,i){if(e.byteLength,t<0||e.byteLength<t)throw new RangeError("'offset' is out of bounds");if(e.byteLength<t+(i||0))throw new RangeError("'length' is out of bounds");return t===void 0&&i===void 0?e=new Uint8Array(e):i===void 0?e=new Uint8Array(e,t):e=new Uint8Array(e,t,i),u.TYPED_ARRAY_SUPPORT?(r=e,r.__proto__=u.prototype):r=K(r,e),r}function He(r,e){if(O(e)){var t=te(e.length)|0;return r=U(r,t),r.length===0||e.copy(r,0,0,t),r}if(e){if(typeof ArrayBuffer<"u"&&e.buffer instanceof ArrayBuffer||"length"in e)return typeof e.length!="number"||ht(e.length)?U(r,0):K(r,e);if(e.type==="Buffer"&&ge(e.data))return K(r,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function te(r){if(r>=V())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+V().toString(16)+" bytes");return r|0}u.isBuffer=k;function O(r){return!!(r!=null&&r._isBuffer)}u.compare=function(e,t){if(!O(e)||!O(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var i=e.length,n=t.length,s=0,o=Math.min(i,n);s<o;++s)if(e[s]!==t[s]){i=e[s],n=t[s];break}return i<n?-1:n<i?1:0};u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};u.concat=function(e,t){if(!ge(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return u.alloc(0);var i;if(t===void 0)for(t=0,i=0;i<e.length;++i)t+=e[i].length;var n=u.allocUnsafe(t),s=0;for(i=0;i<e.length;++i){var o=e[i];if(!O(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,s),s+=o.length}return n};function ve(r,e){if(O(r))return r.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(r)||r instanceof ArrayBuffer))return r.byteLength;typeof r!="string"&&(r=""+r);var t=r.length;if(t===0)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":case void 0:return H(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return Ae(r).length;default:if(i)return H(r).length;e=(""+e).toLowerCase(),i=!0}}u.byteLength=ve;function Je(r,e,t){var i=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(r||(r="utf8");;)switch(r){case"hex":return it(this,e,t);case"utf8":case"utf-8":return be(this,e,t);case"ascii":return et(this,e,t);case"latin1":case"binary":return tt(this,e,t);case"base64":return Ke(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return rt(this,e,t);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),i=!0}}u.prototype._isBuffer=!0;function P(r,e,t){var i=r[e];r[e]=r[t],r[t]=i}u.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)P(this,t,t+1);return this};u.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)P(this,t,t+3),P(this,t+1,t+2);return this};u.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)P(this,t,t+7),P(this,t+1,t+6),P(this,t+2,t+5),P(this,t+3,t+4);return this};u.prototype.toString=function(){var e=this.length|0;return e===0?"":arguments.length===0?be(this,0,e):Je.apply(this,arguments)};u.prototype.equals=function(e){if(!O(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:u.compare(this,e)===0};u.prototype.inspect=function(){var e="",t=qe;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"};u.prototype.compare=function(e,t,i,n,s){if(!O(e))throw new TypeError("Argument must be a Buffer");if(t===void 0&&(t=0),i===void 0&&(i=e?e.length:0),n===void 0&&(n=0),s===void 0&&(s=this.length),t<0||i>e.length||n<0||s>this.length)throw new RangeError("out of range index");if(n>=s&&t>=i)return 0;if(n>=s)return-1;if(t>=i)return 1;if(t>>>=0,i>>>=0,n>>>=0,s>>>=0,this===e)return 0;for(var o=s-n,l=i-t,a=Math.min(o,l),h=this.slice(n,s),c=e.slice(t,i),d=0;d<a;++d)if(h[d]!==c[d]){o=h[d],l=c[d];break}return o<l?-1:l<o?1:0};function ye(r,e,t,i,n){if(r.length===0)return-1;if(typeof t=="string"?(i=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,isNaN(t)&&(t=n?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if(n)return-1;t=r.length-1}else if(t<0)if(n)t=0;else return-1;if(typeof e=="string"&&(e=u.from(e,i)),O(e))return e.length===0?-1:se(r,e,t,i,n);if(typeof e=="number")return e=e&255,u.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?n?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):se(r,[e],t,i,n);throw new TypeError("val must be string, number or Buffer")}function se(r,e,t,i,n){var s=1,o=r.length,l=e.length;if(i!==void 0&&(i=String(i).toLowerCase(),i==="ucs2"||i==="ucs-2"||i==="utf16le"||i==="utf-16le")){if(r.length<2||e.length<2)return-1;s=2,o/=2,l/=2,t/=2}function a(p,I){return s===1?p[I]:p.readUInt16BE(I*s)}var h;if(n){var c=-1;for(h=t;h<o;h++)if(a(r,h)===a(e,c===-1?0:h-c)){if(c===-1&&(c=h),h-c+1===l)return c*s}else c!==-1&&(h-=h-c),c=-1}else for(t+l>o&&(t=o-l),h=t;h>=0;h--){for(var d=!0,m=0;m<l;m++)if(a(r,h+m)!==a(e,m)){d=!1;break}if(d)return h}return-1}u.prototype.includes=function(e,t,i){return this.indexOf(e,t,i)!==-1};u.prototype.indexOf=function(e,t,i){return ye(this,e,t,i,!0)};u.prototype.lastIndexOf=function(e,t,i){return ye(this,e,t,i,!1)};function je(r,e,t,i){t=Number(t)||0;var n=r.length-t;i?(i=Number(i),i>n&&(i=n)):i=n;var s=e.length;if(s%2!==0)throw new TypeError("Invalid hex string");i>s/2&&(i=s/2);for(var o=0;o<i;++o){var l=parseInt(e.substr(o*2,2),16);if(isNaN(l))return o;r[t+o]=l}return o}function We(r,e,t,i){return G(H(e,r.length-t),r,t,i)}function Ee(r,e,t,i){return G(at(e),r,t,i)}function Ge(r,e,t,i){return Ee(r,e,t,i)}function $e(r,e,t,i){return G(Ae(e),r,t,i)}function Xe(r,e,t,i){return G(ut(e,r.length-t),r,t,i)}u.prototype.write=function(e,t,i,n){if(t===void 0)n="utf8",i=this.length,t=0;else if(i===void 0&&typeof t=="string")n=t,i=this.length,t=0;else if(isFinite(t))t=t|0,isFinite(i)?(i=i|0,n===void 0&&(n="utf8")):(n=i,i=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var s=this.length-t;if((i===void 0||i>s)&&(i=s),e.length>0&&(i<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return je(this,e,t,i);case"utf8":case"utf-8":return We(this,e,t,i);case"ascii":return Ee(this,e,t,i);case"latin1":case"binary":return Ge(this,e,t,i);case"base64":return $e(this,e,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Xe(this,e,t,i);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}};u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Ke(r,e,t){return e===0&&t===r.length?ne(r):ne(r.slice(e,t))}function be(r,e,t){t=Math.min(r.length,t);for(var i=[],n=e;n<t;){var s=r[n],o=null,l=s>239?4:s>223?3:s>191?2:1;if(n+l<=t){var a,h,c,d;switch(l){case 1:s<128&&(o=s);break;case 2:a=r[n+1],(a&192)===128&&(d=(s&31)<<6|a&63,d>127&&(o=d));break;case 3:a=r[n+1],h=r[n+2],(a&192)===128&&(h&192)===128&&(d=(s&15)<<12|(a&63)<<6|h&63,d>2047&&(d<55296||d>57343)&&(o=d));break;case 4:a=r[n+1],h=r[n+2],c=r[n+3],(a&192)===128&&(h&192)===128&&(c&192)===128&&(d=(s&15)<<18|(a&63)<<12|(h&63)<<6|c&63,d>65535&&d<1114112&&(o=d))}}o===null?(o=65533,l=1):o>65535&&(o-=65536,i.push(o>>>10&1023|55296),o=56320|o&1023),i.push(o),n+=l}return Ze(i)}var oe=4096;function Ze(r){var e=r.length;if(e<=oe)return String.fromCharCode.apply(String,r);for(var t="",i=0;i<e;)t+=String.fromCharCode.apply(String,r.slice(i,i+=oe));return t}function et(r,e,t){var i="";t=Math.min(r.length,t);for(var n=e;n<t;++n)i+=String.fromCharCode(r[n]&127);return i}function tt(r,e,t){var i="";t=Math.min(r.length,t);for(var n=e;n<t;++n)i+=String.fromCharCode(r[n]);return i}function it(r,e,t){var i=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>i)&&(t=i);for(var n="",s=e;s<t;++s)n+=lt(r[s]);return n}function rt(r,e,t){for(var i=r.slice(e,t),n="",s=0;s<i.length;s+=2)n+=String.fromCharCode(i[s]+i[s+1]*256);return n}u.prototype.slice=function(e,t){var i=this.length;e=~~e,t=t===void 0?i:~~t,e<0?(e+=i,e<0&&(e=0)):e>i&&(e=i),t<0?(t+=i,t<0&&(t=0)):t>i&&(t=i),t<e&&(t=e);var n;if(u.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=u.prototype;else{var s=t-e;n=new u(s,void 0);for(var o=0;o<s;++o)n[o]=this[o+e]}return n};function S(r,e,t){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUIntLE=function(e,t,i){e=e|0,t=t|0,i||S(e,t,this.length);for(var n=this[e],s=1,o=0;++o<t&&(s*=256);)n+=this[e+o]*s;return n};u.prototype.readUIntBE=function(e,t,i){e=e|0,t=t|0,i||S(e,t,this.length);for(var n=this[e+--t],s=1;t>0&&(s*=256);)n+=this[e+--t]*s;return n};u.prototype.readUInt8=function(e,t){return t||S(e,1,this.length),this[e]};u.prototype.readUInt16LE=function(e,t){return t||S(e,2,this.length),this[e]|this[e+1]<<8};u.prototype.readUInt16BE=function(e,t){return t||S(e,2,this.length),this[e]<<8|this[e+1]};u.prototype.readUInt32LE=function(e,t){return t||S(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};u.prototype.readUInt32BE=function(e,t){return t||S(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};u.prototype.readIntLE=function(e,t,i){e=e|0,t=t|0,i||S(e,t,this.length);for(var n=this[e],s=1,o=0;++o<t&&(s*=256);)n+=this[e+o]*s;return s*=128,n>=s&&(n-=Math.pow(2,8*t)),n};u.prototype.readIntBE=function(e,t,i){e=e|0,t=t|0,i||S(e,t,this.length);for(var n=t,s=1,o=this[e+--n];n>0&&(s*=256);)o+=this[e+--n]*s;return s*=128,o>=s&&(o-=Math.pow(2,8*t)),o};u.prototype.readInt8=function(e,t){return t||S(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};u.prototype.readInt16LE=function(e,t){t||S(e,2,this.length);var i=this[e]|this[e+1]<<8;return i&32768?i|4294901760:i};u.prototype.readInt16BE=function(e,t){t||S(e,2,this.length);var i=this[e+1]|this[e]<<8;return i&32768?i|4294901760:i};u.prototype.readInt32LE=function(e,t){return t||S(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};u.prototype.readInt32BE=function(e,t){return t||S(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};u.prototype.readFloatLE=function(e,t){return t||S(e,4,this.length),J(this,e,!0,23,4)};u.prototype.readFloatBE=function(e,t){return t||S(e,4,this.length),J(this,e,!1,23,4)};u.prototype.readDoubleLE=function(e,t){return t||S(e,8,this.length),J(this,e,!0,52,8)};u.prototype.readDoubleBE=function(e,t){return t||S(e,8,this.length),J(this,e,!1,52,8)};function F(r,e,t,i,n,s){if(!O(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<s)throw new RangeError('"value" argument is out of bounds');if(t+i>r.length)throw new RangeError("Index out of range")}u.prototype.writeUIntLE=function(e,t,i,n){if(e=+e,t=t|0,i=i|0,!n){var s=Math.pow(2,8*i)-1;F(this,e,t,i,s,0)}var o=1,l=0;for(this[t]=e&255;++l<i&&(o*=256);)this[t+l]=e/o&255;return t+i};u.prototype.writeUIntBE=function(e,t,i,n){if(e=+e,t=t|0,i=i|0,!n){var s=Math.pow(2,8*i)-1;F(this,e,t,i,s,0)}var o=i-1,l=1;for(this[t+o]=e&255;--o>=0&&(l*=256);)this[t+o]=e/l&255;return t+i};u.prototype.writeUInt8=function(e,t,i){return e=+e,t=t|0,i||F(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=e&255,t+1};function j(r,e,t,i){e<0&&(e=65535+e+1);for(var n=0,s=Math.min(r.length-t,2);n<s;++n)r[t+n]=(e&255<<8*(i?n:1-n))>>>(i?n:1-n)*8}u.prototype.writeUInt16LE=function(e,t,i){return e=+e,t=t|0,i||F(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):j(this,e,t,!0),t+2};u.prototype.writeUInt16BE=function(e,t,i){return e=+e,t=t|0,i||F(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):j(this,e,t,!1),t+2};function W(r,e,t,i){e<0&&(e=4294967295+e+1);for(var n=0,s=Math.min(r.length-t,4);n<s;++n)r[t+n]=e>>>(i?n:3-n)*8&255}u.prototype.writeUInt32LE=function(e,t,i){return e=+e,t=t|0,i||F(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255):W(this,e,t,!0),t+4};u.prototype.writeUInt32BE=function(e,t,i){return e=+e,t=t|0,i||F(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):W(this,e,t,!1),t+4};u.prototype.writeIntLE=function(e,t,i,n){if(e=+e,t=t|0,!n){var s=Math.pow(2,8*i-1);F(this,e,t,i,s-1,-s)}var o=0,l=1,a=0;for(this[t]=e&255;++o<i&&(l*=256);)e<0&&a===0&&this[t+o-1]!==0&&(a=1),this[t+o]=(e/l>>0)-a&255;return t+i};u.prototype.writeIntBE=function(e,t,i,n){if(e=+e,t=t|0,!n){var s=Math.pow(2,8*i-1);F(this,e,t,i,s-1,-s)}var o=i-1,l=1,a=0;for(this[t+o]=e&255;--o>=0&&(l*=256);)e<0&&a===0&&this[t+o+1]!==0&&(a=1),this[t+o]=(e/l>>0)-a&255;return t+i};u.prototype.writeInt8=function(e,t,i){return e=+e,t=t|0,i||F(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=e&255,t+1};u.prototype.writeInt16LE=function(e,t,i){return e=+e,t=t|0,i||F(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):j(this,e,t,!0),t+2};u.prototype.writeInt16BE=function(e,t,i){return e=+e,t=t|0,i||F(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):j(this,e,t,!1),t+2};u.prototype.writeInt32LE=function(e,t,i){return e=+e,t=t|0,i||F(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):W(this,e,t,!0),t+4};u.prototype.writeInt32BE=function(e,t,i){return e=+e,t=t|0,i||F(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):W(this,e,t,!1),t+4};function Ie(r,e,t,i,n,s){if(t+i>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function Se(r,e,t,i,n){return n||Ie(r,e,t,4),me(r,e,t,i,23,4),t+4}u.prototype.writeFloatLE=function(e,t,i){return Se(this,e,t,!0,i)};u.prototype.writeFloatBE=function(e,t,i){return Se(this,e,t,!1,i)};function Ce(r,e,t,i,n){return n||Ie(r,e,t,8),me(r,e,t,i,52,8),t+8}u.prototype.writeDoubleLE=function(e,t,i){return Ce(this,e,t,!0,i)};u.prototype.writeDoubleBE=function(e,t,i){return Ce(this,e,t,!1,i)};u.prototype.copy=function(e,t,i,n){if(i||(i=0),!n&&n!==0&&(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<i&&(n=i),n===i||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-i&&(n=e.length-t+i);var s=n-i,o;if(this===e&&i<t&&t<n)for(o=s-1;o>=0;--o)e[o+t]=this[o+i];else if(s<1e3||!u.TYPED_ARRAY_SUPPORT)for(o=0;o<s;++o)e[o+t]=this[o+i];else Uint8Array.prototype.set.call(e,this.subarray(i,i+s),t);return s};u.prototype.fill=function(e,t,i,n){if(typeof e=="string"){if(typeof t=="string"?(n=t,t=0,i=this.length):typeof i=="string"&&(n=i,i=this.length),e.length===1){var s=e.charCodeAt(0);s<256&&(e=s)}if(n!==void 0&&typeof n!="string")throw new TypeError("encoding must be a string");if(typeof n=="string"&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else typeof e=="number"&&(e=e&255);if(t<0||this.length<t||this.length<i)throw new RangeError("Out of range index");if(i<=t)return this;t=t>>>0,i=i===void 0?this.length:i>>>0,e||(e=0);var o;if(typeof e=="number")for(o=t;o<i;++o)this[o]=e;else{var l=O(e)?e:H(new u(e,n).toString()),a=l.length;for(o=0;o<i-t;++o)this[o+t]=l[o%a]}return this};var nt=/[^+\/0-9A-Za-z-_]/g;function st(r){if(r=ot(r).replace(nt,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function ot(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function lt(r){return r<16?"0"+r.toString(16):r.toString(16)}function H(r,e){e=e||1/0;for(var t,i=r.length,n=null,s=[],o=0;o<i;++o){if(t=r.charCodeAt(o),t>55295&&t<57344){if(!n){if(t>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(o+1===i){(e-=3)>-1&&s.push(239,191,189);continue}n=t;continue}if(t<56320){(e-=3)>-1&&s.push(239,191,189),n=t;continue}t=(n-55296<<10|t-56320)+65536}else n&&(e-=3)>-1&&s.push(239,191,189);if(n=null,t<128){if((e-=1)<0)break;s.push(t)}else if(t<2048){if((e-=2)<0)break;s.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;s.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;s.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return s}function at(r){for(var e=[],t=0;t<r.length;++t)e.push(r.charCodeAt(t)&255);return e}function ut(r,e){for(var t,i,n,s=[],o=0;o<r.length&&!((e-=2)<0);++o)t=r.charCodeAt(o),i=t>>8,n=t%256,s.push(n),s.push(i);return s}function Ae(r){return ze(st(r))}function G(r,e,t,i){for(var n=0;n<i&&!(n+t>=e.length||n>=r.length);++n)e[n+t]=r[n];return n}function ht(r){return r!==r}function k(r){return r!=null&&(!!r._isBuffer||Re(r)||ct(r))}function Re(r){return!!r.constructor&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}function ct(r){return typeof r.readFloatLE=="function"&&typeof r.slice=="function"&&Re(r.slice(0,0))}class _ extends Error{constructor(e,t,i,...n){Array.isArray(t)&&(t=t.join(" ").trim()),super(t),Error.captureStackTrace!==void 0&&Error.captureStackTrace(this,_),this.code=e;for(const s of n)for(const o in s){const l=s[o];this[o]=k(l)?l.toString(i.encoding):l==null?l:JSON.parse(JSON.stringify(l))}}}const dt=function(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)},Fe=function(r){const e=[];for(let t=0,i=r.length;t<i;t++){const n=r[t];if(n==null||n===!1)e[t]={disabled:!0};else if(typeof n=="string")e[t]={name:n};else if(dt(n)){if(typeof n.name!="string")throw new _("CSV_OPTION_COLUMNS_MISSING_NAME",["Option columns missing name:",`property "name" is required at position ${t}`,"when column is an object literal"]);e[t]=n}else throw new _("CSV_INVALID_COLUMN_DEFINITION",["Invalid column definition:","expect a string or a literal object,",`got ${JSON.stringify(n)} at position ${t}`])}return e};class le{constructor(e=100){this.size=e,this.length=0,this.buf=u.allocUnsafe(e)}prepend(e){if(k(e)){const t=this.length+e.length;if(t>=this.size&&(this.resize(),t>=this.size))throw Error("INVALID_BUFFER_STATE");const i=this.buf;this.buf=u.allocUnsafe(this.size),e.copy(this.buf,0),i.copy(this.buf,e.length),this.length+=e.length}else{const t=this.length++;t===this.size&&this.resize();const i=this.clone();this.buf[0]=e,i.copy(this.buf,1,0,t)}}append(e){const t=this.length++;t===this.size&&this.resize(),this.buf[t]=e}clone(){return u.from(this.buf.slice(0,this.length))}resize(){const e=this.length;this.size=this.size*2;const t=u.allocUnsafe(this.size);this.buf.copy(t,0,0,e),this.buf=t}toString(e){return e?this.buf.slice(0,this.length).toString(e):Uint8Array.prototype.slice.call(this.buf.slice(0,this.length))}toJSON(){return this.toString("utf8")}reset(){this.length=0}}const ft=12,pt=13,mt=10,gt=32,_t=9,wt=function(r){return{bomSkipped:!1,bufBytesStart:0,castField:r.cast_function,commenting:!1,error:void 0,enabled:r.from_line===1,escaping:!1,escapeIsQuote:k(r.escape)&&k(r.quote)&&u.compare(r.escape,r.quote)===0,expectedRecordLength:Array.isArray(r.columns)?r.columns.length:void 0,field:new le(20),firstLineToHeaders:r.cast_first_line_to_header,needMoreDataSize:Math.max(r.comment!==null?r.comment.length:0,...r.delimiter.map(e=>e.length),r.quote!==null?r.quote.length:0),previousBuf:void 0,quoting:!1,stop:!1,rawBuffer:new le(100),record:[],recordHasError:!1,record_length:0,recordDelimiterMaxLength:r.record_delimiter.length===0?0:Math.max(...r.record_delimiter.map(e=>e.length)),trimChars:[u.from(" ",r.encoding)[0],u.from("	",r.encoding)[0]],wasQuoting:!1,wasRowDelimiter:!1,timchars:[u.from(u.from([pt],"utf8").toString(),r.encoding),u.from(u.from([mt],"utf8").toString(),r.encoding),u.from(u.from([ft],"utf8").toString(),r.encoding),u.from(u.from([gt],"utf8").toString(),r.encoding),u.from(u.from([_t],"utf8").toString(),r.encoding)]}},vt=function(r){return r.replace(/([A-Z])/g,function(e,t){return"_"+t.toLowerCase()})},ae=function(r){const e={};for(const i in r)e[vt(i)]=r[i];if(e.encoding===void 0||e.encoding===!0)e.encoding="utf8";else if(e.encoding===null||e.encoding===!1)e.encoding=null;else if(typeof e.encoding!="string"&&e.encoding!==null)throw new _("CSV_INVALID_OPTION_ENCODING",["Invalid option encoding:","encoding must be a string or null to return a buffer,",`got ${JSON.stringify(e.encoding)}`],e);if(e.bom===void 0||e.bom===null||e.bom===!1)e.bom=!1;else if(e.bom!==!0)throw new _("CSV_INVALID_OPTION_BOM",["Invalid option bom:","bom must be true,",`got ${JSON.stringify(e.bom)}`],e);if(e.cast_function=null,e.cast===void 0||e.cast===null||e.cast===!1||e.cast==="")e.cast=void 0;else if(typeof e.cast=="function")e.cast_function=e.cast,e.cast=!0;else if(e.cast!==!0)throw new _("CSV_INVALID_OPTION_CAST",["Invalid option cast:","cast must be true or a function,",`got ${JSON.stringify(e.cast)}`],e);if(e.cast_date===void 0||e.cast_date===null||e.cast_date===!1||e.cast_date==="")e.cast_date=!1;else if(e.cast_date===!0)e.cast_date=function(i){const n=Date.parse(i);return isNaN(n)?i:new Date(n)};else if(typeof e.cast_date!="function")throw new _("CSV_INVALID_OPTION_CAST_DATE",["Invalid option cast_date:","cast_date must be true or a function,",`got ${JSON.stringify(e.cast_date)}`],e);if(e.cast_first_line_to_header=null,e.columns===!0)e.cast_first_line_to_header=void 0;else if(typeof e.columns=="function")e.cast_first_line_to_header=e.columns,e.columns=!0;else if(Array.isArray(e.columns))e.columns=Fe(e.columns);else if(e.columns===void 0||e.columns===null||e.columns===!1)e.columns=!1;else throw new _("CSV_INVALID_OPTION_COLUMNS",["Invalid option columns:","expect an array, a function or true,",`got ${JSON.stringify(e.columns)}`],e);if(e.group_columns_by_name===void 0||e.group_columns_by_name===null||e.group_columns_by_name===!1)e.group_columns_by_name=!1;else{if(e.group_columns_by_name!==!0)throw new _("CSV_INVALID_OPTION_GROUP_COLUMNS_BY_NAME",["Invalid option group_columns_by_name:","expect an boolean,",`got ${JSON.stringify(e.group_columns_by_name)}`],e);if(e.columns===!1)throw new _("CSV_INVALID_OPTION_GROUP_COLUMNS_BY_NAME",["Invalid option group_columns_by_name:","the `columns` mode must be activated."],e)}if(e.comment===void 0||e.comment===null||e.comment===!1||e.comment==="")e.comment=null;else if(typeof e.comment=="string"&&(e.comment=u.from(e.comment,e.encoding)),!k(e.comment))throw new _("CSV_INVALID_OPTION_COMMENT",["Invalid option comment:","comment must be a buffer or a string,",`got ${JSON.stringify(e.comment)}`],e);if(e.comment_no_infix===void 0||e.comment_no_infix===null||e.comment_no_infix===!1)e.comment_no_infix=!1;else if(e.comment_no_infix!==!0)throw new _("CSV_INVALID_OPTION_COMMENT",["Invalid option comment_no_infix:","value must be a boolean,",`got ${JSON.stringify(e.comment_no_infix)}`],e);const t=JSON.stringify(e.delimiter);if(Array.isArray(e.delimiter)||(e.delimiter=[e.delimiter]),e.delimiter.length===0)throw new _("CSV_INVALID_OPTION_DELIMITER",["Invalid option delimiter:","delimiter must be a non empty string or buffer or array of string|buffer,",`got ${t}`],e);if(e.delimiter=e.delimiter.map(function(i){if(i==null||i===!1)return u.from(",",e.encoding);if(typeof i=="string"&&(i=u.from(i,e.encoding)),!k(i)||i.length===0)throw new _("CSV_INVALID_OPTION_DELIMITER",["Invalid option delimiter:","delimiter must be a non empty string or buffer or array of string|buffer,",`got ${t}`],e);return i}),e.escape===void 0||e.escape===!0?e.escape=u.from('"',e.encoding):typeof e.escape=="string"?e.escape=u.from(e.escape,e.encoding):(e.escape===null||e.escape===!1)&&(e.escape=null),e.escape!==null&&!k(e.escape))throw new Error(`Invalid Option: escape must be a buffer, a string or a boolean, got ${JSON.stringify(e.escape)}`);if(e.from===void 0||e.from===null)e.from=1;else if(typeof e.from=="string"&&/\d+/.test(e.from)&&(e.from=parseInt(e.from)),Number.isInteger(e.from)){if(e.from<0)throw new Error(`Invalid Option: from must be a positive integer, got ${JSON.stringify(r.from)}`)}else throw new Error(`Invalid Option: from must be an integer, got ${JSON.stringify(e.from)}`);if(e.from_line===void 0||e.from_line===null)e.from_line=1;else if(typeof e.from_line=="string"&&/\d+/.test(e.from_line)&&(e.from_line=parseInt(e.from_line)),Number.isInteger(e.from_line)){if(e.from_line<=0)throw new Error(`Invalid Option: from_line must be a positive integer greater than 0, got ${JSON.stringify(r.from_line)}`)}else throw new Error(`Invalid Option: from_line must be an integer, got ${JSON.stringify(r.from_line)}`);if(e.ignore_last_delimiters===void 0||e.ignore_last_delimiters===null)e.ignore_last_delimiters=!1;else if(typeof e.ignore_last_delimiters=="number")e.ignore_last_delimiters=Math.floor(e.ignore_last_delimiters),e.ignore_last_delimiters===0&&(e.ignore_last_delimiters=!1);else if(typeof e.ignore_last_delimiters!="boolean")throw new _("CSV_INVALID_OPTION_IGNORE_LAST_DELIMITERS",["Invalid option `ignore_last_delimiters`:","the value must be a boolean value or an integer,",`got ${JSON.stringify(e.ignore_last_delimiters)}`],e);if(e.ignore_last_delimiters===!0&&e.columns===!1)throw new _("CSV_IGNORE_LAST_DELIMITERS_REQUIRES_COLUMNS",["The option `ignore_last_delimiters`","requires the activation of the `columns` option"],e);if(e.info===void 0||e.info===null||e.info===!1)e.info=!1;else if(e.info!==!0)throw new Error(`Invalid Option: info must be true, got ${JSON.stringify(e.info)}`);if(e.max_record_size===void 0||e.max_record_size===null||e.max_record_size===!1)e.max_record_size=0;else if(!(Number.isInteger(e.max_record_size)&&e.max_record_size>=0))if(typeof e.max_record_size=="string"&&/\d+/.test(e.max_record_size))e.max_record_size=parseInt(e.max_record_size);else throw new Error(`Invalid Option: max_record_size must be a positive integer, got ${JSON.stringify(e.max_record_size)}`);if(e.objname===void 0||e.objname===null||e.objname===!1)e.objname=void 0;else if(k(e.objname)){if(e.objname.length===0)throw new Error("Invalid Option: objname must be a non empty buffer");e.encoding===null||(e.objname=e.objname.toString(e.encoding))}else if(typeof e.objname=="string"){if(e.objname.length===0)throw new Error("Invalid Option: objname must be a non empty string")}else if(typeof e.objname!="number")throw new Error(`Invalid Option: objname must be a string or a buffer, got ${e.objname}`);if(e.objname!==void 0){if(typeof e.objname=="number"){if(e.columns!==!1)throw Error("Invalid Option: objname index cannot be combined with columns or be defined as a field")}else if(e.columns===!1)throw Error("Invalid Option: objname field must be combined with columns or be defined as an index")}if(e.on_record===void 0||e.on_record===null)e.on_record=void 0;else if(typeof e.on_record!="function")throw new _("CSV_INVALID_OPTION_ON_RECORD",["Invalid option `on_record`:","expect a function,",`got ${JSON.stringify(e.on_record)}`],e);if(e.on_skip!==void 0&&e.on_skip!==null&&typeof e.on_skip!="function")throw new Error(`Invalid Option: on_skip must be a function, got ${JSON.stringify(e.on_skip)}`);if(e.quote===null||e.quote===!1||e.quote==="")e.quote=null;else if(e.quote===void 0||e.quote===!0?e.quote=u.from('"',e.encoding):typeof e.quote=="string"&&(e.quote=u.from(e.quote,e.encoding)),!k(e.quote))throw new Error(`Invalid Option: quote must be a buffer or a string, got ${JSON.stringify(e.quote)}`);if(e.raw===void 0||e.raw===null||e.raw===!1)e.raw=!1;else if(e.raw!==!0)throw new Error(`Invalid Option: raw must be true, got ${JSON.stringify(e.raw)}`);if(e.record_delimiter===void 0)e.record_delimiter=[];else if(typeof e.record_delimiter=="string"||k(e.record_delimiter)){if(e.record_delimiter.length===0)throw new _("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a non empty string or buffer,",`got ${JSON.stringify(e.record_delimiter)}`],e);e.record_delimiter=[e.record_delimiter]}else if(!Array.isArray(e.record_delimiter))throw new _("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a string, a buffer or array of string|buffer,",`got ${JSON.stringify(e.record_delimiter)}`],e);if(e.record_delimiter=e.record_delimiter.map(function(i,n){if(typeof i!="string"&&!k(i))throw new _("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a string, a buffer or array of string|buffer",`at index ${n},`,`got ${JSON.stringify(i)}`],e);if(i.length===0)throw new _("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a non empty string or buffer",`at index ${n},`,`got ${JSON.stringify(i)}`],e);return typeof i=="string"&&(i=u.from(i,e.encoding)),i}),typeof e.relax_column_count!="boolean")if(e.relax_column_count===void 0||e.relax_column_count===null)e.relax_column_count=!1;else throw new Error(`Invalid Option: relax_column_count must be a boolean, got ${JSON.stringify(e.relax_column_count)}`);if(typeof e.relax_column_count_less!="boolean")if(e.relax_column_count_less===void 0||e.relax_column_count_less===null)e.relax_column_count_less=!1;else throw new Error(`Invalid Option: relax_column_count_less must be a boolean, got ${JSON.stringify(e.relax_column_count_less)}`);if(typeof e.relax_column_count_more!="boolean")if(e.relax_column_count_more===void 0||e.relax_column_count_more===null)e.relax_column_count_more=!1;else throw new Error(`Invalid Option: relax_column_count_more must be a boolean, got ${JSON.stringify(e.relax_column_count_more)}`);if(typeof e.relax_quotes!="boolean")if(e.relax_quotes===void 0||e.relax_quotes===null)e.relax_quotes=!1;else throw new Error(`Invalid Option: relax_quotes must be a boolean, got ${JSON.stringify(e.relax_quotes)}`);if(typeof e.skip_empty_lines!="boolean")if(e.skip_empty_lines===void 0||e.skip_empty_lines===null)e.skip_empty_lines=!1;else throw new Error(`Invalid Option: skip_empty_lines must be a boolean, got ${JSON.stringify(e.skip_empty_lines)}`);if(typeof e.skip_records_with_empty_values!="boolean")if(e.skip_records_with_empty_values===void 0||e.skip_records_with_empty_values===null)e.skip_records_with_empty_values=!1;else throw new Error(`Invalid Option: skip_records_with_empty_values must be a boolean, got ${JSON.stringify(e.skip_records_with_empty_values)}`);if(typeof e.skip_records_with_error!="boolean")if(e.skip_records_with_error===void 0||e.skip_records_with_error===null)e.skip_records_with_error=!1;else throw new Error(`Invalid Option: skip_records_with_error must be a boolean, got ${JSON.stringify(e.skip_records_with_error)}`);if(e.rtrim===void 0||e.rtrim===null||e.rtrim===!1)e.rtrim=!1;else if(e.rtrim!==!0)throw new Error(`Invalid Option: rtrim must be a boolean, got ${JSON.stringify(e.rtrim)}`);if(e.ltrim===void 0||e.ltrim===null||e.ltrim===!1)e.ltrim=!1;else if(e.ltrim!==!0)throw new Error(`Invalid Option: ltrim must be a boolean, got ${JSON.stringify(e.ltrim)}`);if(e.trim===void 0||e.trim===null||e.trim===!1)e.trim=!1;else if(e.trim!==!0)throw new Error(`Invalid Option: trim must be a boolean, got ${JSON.stringify(e.trim)}`);if(e.trim===!0&&r.ltrim!==!1?e.ltrim=!0:e.ltrim!==!0&&(e.ltrim=!1),e.trim===!0&&r.rtrim!==!1?e.rtrim=!0:e.rtrim!==!0&&(e.rtrim=!1),e.to===void 0||e.to===null)e.to=-1;else if(typeof e.to=="string"&&/\d+/.test(e.to)&&(e.to=parseInt(e.to)),Number.isInteger(e.to)){if(e.to<=0)throw new Error(`Invalid Option: to must be a positive integer greater than 0, got ${JSON.stringify(r.to)}`)}else throw new Error(`Invalid Option: to must be an integer, got ${JSON.stringify(r.to)}`);if(e.to_line===void 0||e.to_line===null)e.to_line=-1;else if(typeof e.to_line=="string"&&/\d+/.test(e.to_line)&&(e.to_line=parseInt(e.to_line)),Number.isInteger(e.to_line)){if(e.to_line<=0)throw new Error(`Invalid Option: to_line must be a positive integer greater than 0, got ${JSON.stringify(r.to_line)}`)}else throw new Error(`Invalid Option: to_line must be an integer, got ${JSON.stringify(r.to_line)}`);return e},ue=function(r){return r.every(e=>e==null||e.toString&&e.toString().trim()==="")},yt=13,Et=10,q={utf8:u.from([239,187,191]),utf16le:u.from([255,254])},bt=function(r={}){const e={bytes:0,comment_lines:0,empty_lines:0,invalid_field_length:0,lines:1,records:0},t=ae(r);return{info:e,original_options:r,options:t,state:wt(t),__needMoreData:function(i,n,s){if(s)return!1;const{encoding:o,escape:l,quote:a}=this.options,{quoting:h,needMoreDataSize:c,recordDelimiterMaxLength:d}=this.state,m=n-i-1,p=Math.max(c,d===0?u.from(`\r
`,o).length:d,h?(l===null?0:l.length)+a.length:0,h?a.length+d:0);return m<p},parse:function(i,n,s,o){const{bom:l,comment_no_infix:a,encoding:h,from_line:c,ltrim:d,max_record_size:m,raw:p,relax_quotes:I,rtrim:y,skip_empty_lines:D,to:A,to_line:E}=this.options;let{comment:w,escape:R,quote:N,record_delimiter:$}=this.options;const{bomSkipped:xe,previousBuf:Y,rawBuffer:Oe,escapeIsQuote:Le}=this.state;let v;if(Y===void 0)if(i===void 0){o();return}else v=i;else Y!==void 0&&i===void 0?v=Y:v=u.concat([Y,i]);if(xe===!1)if(l===!1)this.state.bomSkipped=!0;else if(v.length<3){if(n===!1){this.state.previousBuf=v;return}}else{for(const b in q)if(q[b].compare(v,0,q[b].length)===0){const z=q[b].length;this.state.bufBytesStart+=z,v=v.slice(z),this.options=ae({...this.original_options,encoding:b}),{comment:w,escape:R,quote:N}=this.options;break}this.state.bomSkipped=!0}const X=v.length;let g;for(g=0;g<X&&!this.__needMoreData(g,X,n);g++){if(this.state.wasRowDelimiter===!0&&(this.info.lines++,this.state.wasRowDelimiter=!1),E!==-1&&this.info.lines>E){this.state.stop=!0,o();return}this.state.quoting===!1&&$.length===0&&this.__autoDiscoverRecordDelimiter(v,g)&&($=this.options.record_delimiter);const b=v[g];if(p===!0&&Oe.append(b),(b===yt||b===Et)&&this.state.wasRowDelimiter===!1&&(this.state.wasRowDelimiter=!0),this.state.escaping===!0)this.state.escaping=!1;else{if(R!==null&&this.state.quoting===!0&&this.__isEscape(v,g,b)&&g+R.length<X)if(Le){if(this.__isQuote(v,g+R.length)){this.state.escaping=!0,g+=R.length-1;continue}}else{this.state.escaping=!0,g+=R.length-1;continue}if(this.state.commenting===!1&&this.__isQuote(v,g))if(this.state.quoting===!0){const C=v[g+N.length],M=y&&this.__isCharTrimable(v,g+N.length),L=w!==null&&this.__compareBytes(w,v,g+N.length,C),B=this.__isDelimiter(v,g+N.length,C),Q=$.length===0?this.__autoDiscoverRecordDelimiter(v,g+N.length):this.__isRecordDelimiter(C,v,g+N.length);if(R!==null&&this.__isEscape(v,g,b)&&this.__isQuote(v,g+R.length))g+=R.length-1;else if(!C||B||Q||L||M){this.state.quoting=!1,this.state.wasQuoting=!0,g+=N.length-1;continue}else if(I===!1){const ie=this.__error(new _("CSV_INVALID_CLOSING_QUOTE",["Invalid Closing Quote:",`got "${String.fromCharCode(C)}"`,`at line ${this.info.lines}`,"instead of delimiter, record delimiter, trimable character","(if activated) or comment"],this.options,this.__infoField()));if(ie!==void 0)return ie}else this.state.quoting=!1,this.state.wasQuoting=!0,this.state.field.prepend(N),g+=N.length-1}else if(this.state.field.length!==0){if(I===!1){const C=this.__infoField(),M=Object.keys(q).map(B=>q[B].equals(this.state.field.toString())?B:!1).filter(Boolean)[0],L=this.__error(new _("INVALID_OPENING_QUOTE",["Invalid Opening Quote:",`a quote is found on field ${JSON.stringify(C.column)} at line ${C.lines}, value is ${JSON.stringify(this.state.field.toString(h))}`,M?`(${M} bom)`:void 0],this.options,C,{field:this.state.field}));if(L!==void 0)return L}}else{this.state.quoting=!0,g+=N.length-1;continue}if(this.state.quoting===!1){const C=this.__isRecordDelimiter(b,v,g);if(C!==0){if(this.state.commenting&&this.state.wasQuoting===!1&&this.state.record.length===0&&this.state.field.length===0)this.info.comment_lines++;else{if(this.state.enabled===!1&&this.info.lines+(this.state.wasRowDelimiter===!0?1:0)>=c){this.state.enabled=!0,this.__resetField(),this.__resetRecord(),g+=C-1;continue}if(D===!0&&this.state.wasQuoting===!1&&this.state.record.length===0&&this.state.field.length===0){this.info.empty_lines++,g+=C-1;continue}this.info.bytes=this.state.bufBytesStart+g;const B=this.__onField();if(B!==void 0)return B;this.info.bytes=this.state.bufBytesStart+g+C;const Q=this.__onRecord(s);if(Q!==void 0)return Q;if(A!==-1&&this.info.records>=A){this.state.stop=!0,o();return}}this.state.commenting=!1,g+=C-1;continue}if(this.state.commenting)continue;if(w!==null&&(a===!1||this.state.record.length===0&&this.state.field.length===0)&&this.__compareBytes(w,v,g,b)!==0){this.state.commenting=!0;continue}const M=this.__isDelimiter(v,g,b);if(M!==0){this.info.bytes=this.state.bufBytesStart+g;const L=this.__onField();if(L!==void 0)return L;g+=M-1;continue}}}if(this.state.commenting===!1&&m!==0&&this.state.record_length+this.state.field.length>m)return this.__error(new _("CSV_MAX_RECORD_SIZE",["Max Record Size:","record exceed the maximum number of tolerated bytes",`of ${m}`,`at line ${this.info.lines}`],this.options,this.__infoField()));const z=d===!1||this.state.quoting===!0||this.state.field.length!==0||!this.__isCharTrimable(v,g),Ue=y===!1||this.state.wasQuoting===!1;if(z===!0&&Ue===!0)this.state.field.append(b);else{if(y===!0&&!this.__isCharTrimable(v,g))return this.__error(new _("CSV_NON_TRIMABLE_CHAR_AFTER_CLOSING_QUOTE",["Invalid Closing Quote:","found non trimable byte after quote",`at line ${this.info.lines}`],this.options,this.__infoField()));z===!1&&(g+=this.__isCharTrimable(v,g)-1);continue}}if(n===!0)if(this.state.quoting===!0){const b=this.__error(new _("CSV_QUOTE_NOT_CLOSED",["Quote Not Closed:",`the parsing is finished with an opening quote at line ${this.info.lines}`],this.options,this.__infoField()));if(b!==void 0)return b}else if(this.state.wasQuoting===!0||this.state.record.length!==0||this.state.field.length!==0){this.info.bytes=this.state.bufBytesStart+g;const b=this.__onField();if(b!==void 0)return b;const z=this.__onRecord(s);if(z!==void 0)return z}else this.state.wasRowDelimiter===!0?this.info.empty_lines++:this.state.commenting===!0&&this.info.comment_lines++;else this.state.bufBytesStart+=g,this.state.previousBuf=v.slice(g);this.state.wasRowDelimiter===!0&&(this.info.lines++,this.state.wasRowDelimiter=!1)},__onRecord:function(i){const{columns:n,group_columns_by_name:s,encoding:o,info:l,from:a,relax_column_count:h,relax_column_count_less:c,relax_column_count_more:d,raw:m,skip_records_with_empty_values:p}=this.options,{enabled:I,record:y}=this.state;if(I===!1)return this.__resetRecord();const D=y.length;if(n===!0){if(p===!0&&ue(y)){this.__resetRecord();return}return this.__firstLineToColumns(y)}if(n===!1&&this.info.records===0&&(this.state.expectedRecordLength=D),D!==this.state.expectedRecordLength){const A=n===!1?new _("CSV_RECORD_INCONSISTENT_FIELDS_LENGTH",["Invalid Record Length:",`expect ${this.state.expectedRecordLength},`,`got ${D} on line ${this.info.lines}`],this.options,this.__infoField(),{record:y}):new _("CSV_RECORD_INCONSISTENT_COLUMNS",["Invalid Record Length:",`columns length is ${n.length},`,`got ${D} on line ${this.info.lines}`],this.options,this.__infoField(),{record:y});if(h===!0||c===!0&&D<this.state.expectedRecordLength||d===!0&&D>this.state.expectedRecordLength)this.info.invalid_field_length++,this.state.error=A;else{const E=this.__error(A);if(E)return E}}if(p===!0&&ue(y)){this.__resetRecord();return}if(this.state.recordHasError===!0){this.__resetRecord(),this.state.recordHasError=!1;return}if(this.info.records++,a===1||this.info.records>=a){const{objname:A}=this.options;if(n!==!1){const E={};for(let w=0,R=y.length;w<R;w++)n[w]===void 0||n[w].disabled||(s===!0&&E[n[w].name]!==void 0?Array.isArray(E[n[w].name])?E[n[w].name]=E[n[w].name].concat(y[w]):E[n[w].name]=[E[n[w].name],y[w]]:E[n[w].name]=y[w]);if(m===!0||l===!0){const w=Object.assign({record:E},m===!0?{raw:this.state.rawBuffer.toString(o)}:{},l===!0?{info:this.__infoRecord()}:{}),R=this.__push(A===void 0?w:[E[A],w],i);if(R)return R}else{const w=this.__push(A===void 0?E:[E[A],E],i);if(w)return w}}else if(m===!0||l===!0){const E=Object.assign({record:y},m===!0?{raw:this.state.rawBuffer.toString(o)}:{},l===!0?{info:this.__infoRecord()}:{}),w=this.__push(A===void 0?E:[y[A],E],i);if(w)return w}else{const E=this.__push(A===void 0?y:[y[A],y],i);if(E)return E}}this.__resetRecord()},__firstLineToColumns:function(i){const{firstLineToHeaders:n}=this.state;try{const s=n===void 0?i:n.call(null,i);if(!Array.isArray(s))return this.__error(new _("CSV_INVALID_COLUMN_MAPPING",["Invalid Column Mapping:","expect an array from column function,",`got ${JSON.stringify(s)}`],this.options,this.__infoField(),{headers:s}));const o=Fe(s);this.state.expectedRecordLength=o.length,this.options.columns=o,this.__resetRecord();return}catch(s){return s}},__resetRecord:function(){this.options.raw===!0&&this.state.rawBuffer.reset(),this.state.error=void 0,this.state.record=[],this.state.record_length=0},__onField:function(){const{cast:i,encoding:n,rtrim:s,max_record_size:o}=this.options,{enabled:l,wasQuoting:a}=this.state;if(l===!1)return this.__resetField();let h=this.state.field.toString(n);if(s===!0&&a===!1&&(h=h.trimRight()),i===!0){const[c,d]=this.__cast(h);if(c!==void 0)return c;h=d}this.state.record.push(h),o!==0&&typeof h=="string"&&(this.state.record_length+=h.length),this.__resetField()},__resetField:function(){this.state.field.reset(),this.state.wasQuoting=!1},__push:function(i,n){const{on_record:s}=this.options;if(s!==void 0){const o=this.__infoRecord();try{i=s.call(null,i,o)}catch(l){return l}if(i==null)return}n(i)},__cast:function(i){const{columns:n,relax_column_count:s}=this.options;if(Array.isArray(n)===!0&&s&&this.options.columns.length<=this.state.record.length)return[void 0,void 0];if(this.state.castField!==null)try{const l=this.__infoField();return[void 0,this.state.castField.call(null,i,l)]}catch(l){return[l]}if(this.__isFloat(i))return[void 0,parseFloat(i)];if(this.options.cast_date!==!1){const l=this.__infoField();return[void 0,this.options.cast_date.call(null,i,l)]}return[void 0,i]},__isCharTrimable:function(i,n){return((o,l)=>{const{timchars:a}=this.state;e:for(let h=0;h<a.length;h++){const c=a[h];for(let d=0;d<c.length;d++)if(c[d]!==o[l+d])continue e;return c.length}return 0})(i,n)},__isFloat:function(i){return i-parseFloat(i)+1>=0},__compareBytes:function(i,n,s,o){if(i[0]!==o)return 0;const l=i.length;for(let a=1;a<l;a++)if(i[a]!==n[s+a])return 0;return l},__isDelimiter:function(i,n,s){const{delimiter:o,ignore_last_delimiters:l}=this.options;if(l===!0&&this.state.record.length===this.options.columns.length-1)return 0;if(l!==!1&&typeof l=="number"&&this.state.record.length===l-1)return 0;e:for(let a=0;a<o.length;a++){const h=o[a];if(h[0]===s){for(let c=1;c<h.length;c++)if(h[c]!==i[n+c])continue e;return h.length}}return 0},__isRecordDelimiter:function(i,n,s){const{record_delimiter:o}=this.options,l=o.length;e:for(let a=0;a<l;a++){const h=o[a],c=h.length;if(h[0]===i){for(let d=1;d<c;d++)if(h[d]!==n[s+d])continue e;return h.length}}return 0},__isEscape:function(i,n,s){const{escape:o}=this.options;if(o===null)return!1;const l=o.length;if(o[0]===s){for(let a=0;a<l;a++)if(o[a]!==i[n+a])return!1;return!0}return!1},__isQuote:function(i,n){const{quote:s}=this.options;if(s===null)return!1;const o=s.length;for(let l=0;l<o;l++)if(s[l]!==i[n+l])return!1;return!0},__autoDiscoverRecordDelimiter:function(i,n){const{encoding:s}=this.options,o=[u.from(`\r
`,s),u.from(`
`,s),u.from("\r",s)];e:for(let l=0;l<o.length;l++){const a=o[l].length;for(let h=0;h<a;h++)if(o[l][h]!==i[n+h])continue e;return this.options.record_delimiter.push(o[l]),this.state.recordDelimiterMaxLength=o[l].length,o[l].length}return 0},__error:function(i){const{encoding:n,raw:s,skip_records_with_error:o}=this.options,l=typeof i=="string"?new Error(i):i;if(o){this.state.recordHasError=!0,this.options.on_skip!==void 0&&this.options.on_skip(l,s?this.state.rawBuffer.toString(n):void 0);return}else return l},__infoDataSet:function(){return{...this.info,columns:this.options.columns}},__infoRecord:function(){const{columns:i,raw:n,encoding:s}=this.options;return{...this.__infoDataSet(),error:this.state.error,header:i===!0,index:this.state.record.length,raw:n?this.state.rawBuffer.toString(s):void 0}},__infoField:function(){const{columns:i}=this.options,n=Array.isArray(i);return{...this.__infoRecord(),column:n===!0?i.length>this.state.record.length?i[this.state.record.length].name:null:this.state.record.length,quoting:this.state.wasQuoting}}}},Dt=function(r,e={}){typeof r=="string"&&(r=u.from(r));const t=e&&e.objname?{}:[],i=bt(e),n=a=>{i.options.objname===void 0?t.push(a):t[a[0]]=a[1]},s=()=>{},o=i.parse(r,!1,n,s);if(o!==void 0)throw o;const l=i.parse(void 0,!0,n,s);if(l!==void 0)throw l;return t};function It(r){if(r===null)throw TypeError("elt is null");return r}function zt(r){return It(document.getElementById(r))}function Mt(r,e,t={}){let i=document.createElement(e);return r.appendChild(i),Object.entries(t).forEach(([n,s])=>i.setAttribute(n,s)),i}var he=Te;function Te(){var r=[].slice.call(arguments),e=!1;typeof r[0]=="boolean"&&(e=r.shift());var t=r[0];if(ce(t))throw new Error("extendee must be an object");for(var i=r.slice(1),n=i.length,s=0;s<n;s++){var o=i[s];for(var l in o)if(Object.prototype.hasOwnProperty.call(o,l)){var a=o[l];if(e&&St(a)){var h=Array.isArray(a)?[]:{};t[l]=Te(!0,Object.prototype.hasOwnProperty.call(t,l)&&!ce(t[l])?t[l]:h,a)}else t[l]=a}}return t}function St(r){return Array.isArray(r)||{}.toString.call(r)=="[object Object]"}function ce(r){return!r||typeof r!="object"&&typeof r!="function"}function Ct(r){return r&&r.__esModule?r.default:r}class de{on(e,t){return this._callbacks=this._callbacks||{},this._callbacks[e]||(this._callbacks[e]=[]),this._callbacks[e].push(t),this}emit(e,...t){this._callbacks=this._callbacks||{};let i=this._callbacks[e];if(i)for(let n of i)n.apply(this,t);return this.element&&this.element.dispatchEvent(this.makeEvent("dropzone:"+e,{args:t})),this}makeEvent(e,t){let i={bubbles:!0,cancelable:!0,detail:t};if(typeof window.CustomEvent=="function")return new CustomEvent(e,i);var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,i.bubbles,i.cancelable,i.detail),n}off(e,t){if(!this._callbacks||arguments.length===0)return this._callbacks={},this;let i=this._callbacks[e];if(!i)return this;if(arguments.length===1)return delete this._callbacks[e],this;for(let n=0;n<i.length;n++)if(i[n]===t){i.splice(n,1);break}return this}}var ke={};ke=`<div class="dz-preview dz-file-preview">
  <div class="dz-image"><img data-dz-thumbnail=""></div>
  <div class="dz-details">
    <div class="dz-size"><span data-dz-size=""></span></div>
    <div class="dz-filename"><span data-dz-name=""></span></div>
  </div>
  <div class="dz-progress">
    <span class="dz-upload" data-dz-uploadprogress=""></span>
  </div>
  <div class="dz-error-message"><span data-dz-errormessage=""></span></div>
  <div class="dz-success-mark">
    <svg width="54" height="54" viewBox="0 0 54 54" fill="white" xmlns="http://www.w3.org/2000/svg">
      <path d="M10.2071 29.7929L14.2929 25.7071C14.6834 25.3166 15.3166 25.3166 15.7071 25.7071L21.2929 31.2929C21.6834 31.6834 22.3166 31.6834 22.7071 31.2929L38.2929 15.7071C38.6834 15.3166 39.3166 15.3166 39.7071 15.7071L43.7929 19.7929C44.1834 20.1834 44.1834 20.8166 43.7929 21.2071L22.7071 42.2929C22.3166 42.6834 21.6834 42.6834 21.2929 42.2929L10.2071 31.2071C9.81658 30.8166 9.81658 30.1834 10.2071 29.7929Z"></path>
    </svg>
  </div>
  <div class="dz-error-mark">
    <svg width="54" height="54" viewBox="0 0 54 54" fill="white" xmlns="http://www.w3.org/2000/svg">
      <path d="M26.2929 20.2929L19.2071 13.2071C18.8166 12.8166 18.1834 12.8166 17.7929 13.2071L13.2071 17.7929C12.8166 18.1834 12.8166 18.8166 13.2071 19.2071L20.2929 26.2929C20.6834 26.6834 20.6834 27.3166 20.2929 27.7071L13.2071 34.7929C12.8166 35.1834 12.8166 35.8166 13.2071 36.2071L17.7929 40.7929C18.1834 41.1834 18.8166 41.1834 19.2071 40.7929L26.2929 33.7071C26.6834 33.3166 27.3166 33.3166 27.7071 33.7071L34.7929 40.7929C35.1834 41.1834 35.8166 41.1834 36.2071 40.7929L40.7929 36.2071C41.1834 35.8166 41.1834 35.1834 40.7929 34.7929L33.7071 27.7071C33.3166 27.3166 33.3166 26.6834 33.7071 26.2929L40.7929 19.2071C41.1834 18.8166 41.1834 18.1834 40.7929 17.7929L36.2071 13.2071C35.8166 12.8166 35.1834 12.8166 34.7929 13.2071L27.7071 20.2929C27.3166 20.6834 26.6834 20.6834 26.2929 20.2929Z"></path>
    </svg>
  </div>
</div>
`;let At={url:null,method:"post",withCredentials:!1,timeout:null,parallelUploads:2,uploadMultiple:!1,chunking:!1,forceChunking:!1,chunkSize:2097152,parallelChunkUploads:!1,retryChunks:!1,retryChunksLimit:3,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,thumbnailMethod:"crop",resizeWidth:null,resizeHeight:null,resizeMimeType:null,resizeQuality:.8,resizeMethod:"contain",filesizeBase:1e3,maxFiles:null,headers:null,defaultHeaders:!0,clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,disablePreviews:!1,hiddenInputContainer:"body",capture:null,renameFilename:null,renameFile:null,forceFallback:!1,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictUploadCanceled:"Upload canceled.",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",dictFileSizeUnits:{tb:"TB",gb:"GB",mb:"MB",kb:"KB",b:"b"},init(){},params(r,e,t){if(t)return{dzuuid:t.file.upload.uuid,dzchunkindex:t.index,dztotalfilesize:t.file.size,dzchunksize:this.options.chunkSize,dztotalchunkcount:t.file.upload.totalChunkCount,dzchunkbyteoffset:t.index*this.options.chunkSize}},accept(r,e){return e()},chunksUploaded:function(r,e){e()},binaryBody:!1,fallback(){let r;this.element.className=`${this.element.className} dz-browser-not-supported`;for(let t of this.element.getElementsByTagName("div"))if(/(^| )dz-message($| )/.test(t.className)){r=t,t.className="dz-message";break}r||(r=f.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(r));let e=r.getElementsByTagName("span")[0];return e&&(e.textContent!=null?e.textContent=this.options.dictFallbackMessage:e.innerText!=null&&(e.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize(r,e,t,i){let n={srcX:0,srcY:0,srcWidth:r.width,srcHeight:r.height},s=r.width/r.height;e==null&&t==null?(e=n.srcWidth,t=n.srcHeight):e==null?e=t*s:t==null&&(t=e/s),e=Math.min(e,n.srcWidth),t=Math.min(t,n.srcHeight);let o=e/t;if(n.srcWidth>e||n.srcHeight>t)if(i==="crop")s>o?(n.srcHeight=r.height,n.srcWidth=n.srcHeight*o):(n.srcWidth=r.width,n.srcHeight=n.srcWidth/o);else if(i==="contain")s>o?t=e/s:e=t*s;else throw new Error(`Unknown resizeMethod '${i}'`);return n.srcX=(r.width-n.srcWidth)/2,n.srcY=(r.height-n.srcHeight)/2,n.trgWidth=e,n.trgHeight=t,n},transformFile(r,e){return(this.options.resizeWidth||this.options.resizeHeight)&&r.type.match(/image.*/)?this.resizeImage(r,this.options.resizeWidth,this.options.resizeHeight,this.options.resizeMethod,e):e(r)},previewTemplate:Ct(ke),drop(r){return this.element.classList.remove("dz-drag-hover")},dragstart(r){},dragend(r){return this.element.classList.remove("dz-drag-hover")},dragenter(r){return this.element.classList.add("dz-drag-hover")},dragover(r){return this.element.classList.add("dz-drag-hover")},dragleave(r){return this.element.classList.remove("dz-drag-hover")},paste(r){},reset(){return this.element.classList.remove("dz-started")},addedfile(r){if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer&&!this.options.disablePreviews){r.previewElement=f.createElement(this.options.previewTemplate.trim()),r.previewTemplate=r.previewElement,this.previewsContainer.appendChild(r.previewElement);for(var e of r.previewElement.querySelectorAll("[data-dz-name]"))e.textContent=r.name;for(e of r.previewElement.querySelectorAll("[data-dz-size]"))e.innerHTML=this.filesize(r.size);this.options.addRemoveLinks&&(r._removeLink=f.createElement(`<a class="dz-remove" href="javascript:undefined;" data-dz-remove>${this.options.dictRemoveFile}</a>`),r.previewElement.appendChild(r._removeLink));let t=i=>(i.preventDefault(),i.stopPropagation(),r.status===f.UPLOADING?f.confirm(this.options.dictCancelUploadConfirmation,()=>this.removeFile(r)):this.options.dictRemoveFileConfirmation?f.confirm(this.options.dictRemoveFileConfirmation,()=>this.removeFile(r)):this.removeFile(r));for(let i of r.previewElement.querySelectorAll("[data-dz-remove]"))i.addEventListener("click",t)}},removedfile(r){return r.previewElement!=null&&r.previewElement.parentNode!=null&&r.previewElement.parentNode.removeChild(r.previewElement),this._updateMaxFilesReachedClass()},thumbnail(r,e){if(r.previewElement){r.previewElement.classList.remove("dz-file-preview");for(let t of r.previewElement.querySelectorAll("[data-dz-thumbnail]"))t.alt=r.name,t.src=e;return setTimeout(()=>r.previewElement.classList.add("dz-image-preview"),1)}},error(r,e){if(r.previewElement){r.previewElement.classList.add("dz-error"),typeof e!="string"&&e.error&&(e=e.error);for(let t of r.previewElement.querySelectorAll("[data-dz-errormessage]"))t.textContent=e}},errormultiple(){},processing(r){if(r.previewElement&&(r.previewElement.classList.add("dz-processing"),r._removeLink))return r._removeLink.innerHTML=this.options.dictCancelUpload},processingmultiple(){},uploadprogress(r,e,t){if(r.previewElement)for(let i of r.previewElement.querySelectorAll("[data-dz-uploadprogress]"))i.nodeName==="PROGRESS"?i.value=e:i.style.width=`${e}%`},totaluploadprogress(){},sending(){},sendingmultiple(){},success(r){if(r.previewElement)return r.previewElement.classList.add("dz-success")},successmultiple(){},canceled(r){return this.emit("error",r,this.options.dictUploadCanceled)},canceledmultiple(){},complete(r){if(r._removeLink&&(r._removeLink.innerHTML=this.options.dictRemoveFile),r.previewElement)return r.previewElement.classList.add("dz-complete")},completemultiple(){},maxfilesexceeded(){},maxfilesreached(){},queuecomplete(){},addedfiles(){}};var Rt=At;class f extends de{static initClass(){this.prototype.Emitter=de,this.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],this.prototype._thumbnailQueue=[],this.prototype._processingThumbnail=!1}getAcceptedFiles(){return this.files.filter(e=>e.accepted).map(e=>e)}getRejectedFiles(){return this.files.filter(e=>!e.accepted).map(e=>e)}getFilesWithStatus(e){return this.files.filter(t=>t.status===e).map(t=>t)}getQueuedFiles(){return this.getFilesWithStatus(f.QUEUED)}getUploadingFiles(){return this.getFilesWithStatus(f.UPLOADING)}getAddedFiles(){return this.getFilesWithStatus(f.ADDED)}getActiveFiles(){return this.files.filter(e=>e.status===f.UPLOADING||e.status===f.QUEUED).map(e=>e)}init(){if(this.element.tagName==="form"&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(f.createElement(`<div class="dz-default dz-message"><button class="dz-button" type="button">${this.options.dictDefaultMessage}</button></div>`)),this.clickableElements.length){let i=()=>{this.hiddenFileInput&&this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=document.createElement("input"),this.hiddenFileInput.setAttribute("type","file"),(this.options.maxFiles===null||this.options.maxFiles>1)&&this.hiddenFileInput.setAttribute("multiple","multiple"),this.hiddenFileInput.className="dz-hidden-input",this.options.acceptedFiles!==null&&this.hiddenFileInput.setAttribute("accept",this.options.acceptedFiles),this.options.capture!==null&&this.hiddenFileInput.setAttribute("capture",this.options.capture),this.hiddenFileInput.setAttribute("tabindex","-1"),this.hiddenFileInput.style.visibility="hidden",this.hiddenFileInput.style.position="absolute",this.hiddenFileInput.style.top="0",this.hiddenFileInput.style.left="0",this.hiddenFileInput.style.height="0",this.hiddenFileInput.style.width="0",f.getElement(this.options.hiddenInputContainer,"hiddenInputContainer").appendChild(this.hiddenFileInput),this.hiddenFileInput.addEventListener("change",()=>{let{files:n}=this.hiddenFileInput;if(n.length)for(let s of n)this.addFile(s);this.emit("addedfiles",n),i()})};i()}this.URL=window.URL!==null?window.URL:window.webkitURL;for(let i of this.events)this.on(i,this.options[i]);this.on("uploadprogress",()=>this.updateTotalUploadProgress()),this.on("removedfile",()=>this.updateTotalUploadProgress()),this.on("canceled",i=>this.emit("complete",i)),this.on("complete",i=>{if(this.getAddedFiles().length===0&&this.getUploadingFiles().length===0&&this.getQueuedFiles().length===0)return setTimeout(()=>this.emit("queuecomplete"),0)});const e=function(i){if(i.dataTransfer.types){for(var n=0;n<i.dataTransfer.types.length;n++)if(i.dataTransfer.types[n]==="Files")return!0}return!1};let t=function(i){if(e(i))return i.stopPropagation(),i.preventDefault?i.preventDefault():i.returnValue=!1};return this.listeners=[{element:this.element,events:{dragstart:i=>this.emit("dragstart",i),dragenter:i=>(t(i),this.emit("dragenter",i)),dragover:i=>{let n;try{n=i.dataTransfer.effectAllowed}catch{}return i.dataTransfer.dropEffect=n==="move"||n==="linkMove"?"move":"copy",t(i),this.emit("dragover",i)},dragleave:i=>this.emit("dragleave",i),drop:i=>(t(i),this.drop(i)),dragend:i=>this.emit("dragend",i)}}],this.clickableElements.forEach(i=>this.listeners.push({element:i,events:{click:n=>((i!==this.element||n.target===this.element||f.elementInside(n.target,this.element.querySelector(".dz-message")))&&this.hiddenFileInput.click(),!0)}})),this.enable(),this.options.init.call(this)}destroy(){return this.disable(),this.removeAllFiles(!0),this.hiddenFileInput!=null&&this.hiddenFileInput.parentNode&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,f.instances.splice(f.instances.indexOf(this),1)}updateTotalUploadProgress(){let e,t=0,i=0;if(this.getActiveFiles().length){for(let s of this.getActiveFiles())t+=s.upload.bytesSent,i+=s.upload.total;e=100*t/i}else e=100;return this.emit("totaluploadprogress",e,i,t)}_getParamName(e){return typeof this.options.paramName=="function"?this.options.paramName(e):`${this.options.paramName}${this.options.uploadMultiple?`[${e}]`:""}`}_renameFile(e){return typeof this.options.renameFile!="function"?e.name:this.options.renameFile(e)}getFallbackForm(){let e,t;if(e=this.getExistingFallback())return e;let i='<div class="dz-fallback">';this.options.dictFallbackText&&(i+=`<p>${this.options.dictFallbackText}</p>`),i+=`<input type="file" name="${this._getParamName(0)}" ${this.options.uploadMultiple?'multiple="multiple"':void 0} /><input type="submit" value="Upload!"></div>`;let n=f.createElement(i);return this.element.tagName!=="FORM"?(t=f.createElement(`<form action="${this.options.url}" enctype="multipart/form-data" method="${this.options.method}"></form>`),t.appendChild(n)):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),t??n}getExistingFallback(){let e=function(i){for(let n of i)if(/(^| )fallback($| )/.test(n.className))return n};for(let i of["div","form"]){var t;if(t=e(this.element.getElementsByTagName(i)))return t}}setupEventListeners(){return this.listeners.map(e=>(()=>{let t=[];for(let i in e.events){let n=e.events[i];t.push(e.element.addEventListener(i,n,!1))}return t})())}removeEventListeners(){return this.listeners.map(e=>(()=>{let t=[];for(let i in e.events){let n=e.events[i];t.push(e.element.removeEventListener(i,n,!1))}return t})())}disable(){return this.clickableElements.forEach(e=>e.classList.remove("dz-clickable")),this.removeEventListeners(),this.disabled=!0,this.files.map(e=>this.cancelUpload(e))}enable(){return delete this.disabled,this.clickableElements.forEach(e=>e.classList.add("dz-clickable")),this.setupEventListeners()}filesize(e){let t=0,i="b";if(e>0){let n=["tb","gb","mb","kb","b"];for(let s=0;s<n.length;s++){let o=n[s],l=Math.pow(this.options.filesizeBase,4-s)/10;if(e>=l){t=e/Math.pow(this.options.filesizeBase,4-s),i=o;break}}t=Math.round(10*t)/10}return`<strong>${t}</strong> ${this.options.dictFileSizeUnits[i]}`}_updateMaxFilesReachedClass(){return this.options.maxFiles!=null&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")}drop(e){if(!e.dataTransfer)return;this.emit("drop",e);let t=[];for(let i=0;i<e.dataTransfer.files.length;i++)t[i]=e.dataTransfer.files[i];if(t.length){let{items:i}=e.dataTransfer;i&&i.length&&i[0].webkitGetAsEntry!=null?this._addFilesFromItems(i):this.handleFiles(t)}this.emit("addedfiles",t)}paste(e){if(xt(e!=null?e.clipboardData:void 0,i=>i.items)==null)return;this.emit("paste",e);let{items:t}=e.clipboardData;if(t.length)return this._addFilesFromItems(t)}handleFiles(e){for(let t of e)this.addFile(t)}_addFilesFromItems(e){return(()=>{let t=[];for(let n of e){var i;n.webkitGetAsEntry!=null&&(i=n.webkitGetAsEntry())?i.isFile?t.push(this.addFile(n.getAsFile())):i.isDirectory?t.push(this._addFilesFromDirectory(i,i.name)):t.push(void 0):n.getAsFile!=null&&(n.kind==null||n.kind==="file")?t.push(this.addFile(n.getAsFile())):t.push(void 0)}return t})()}_addFilesFromDirectory(e,t){let i=e.createReader(),n=o=>Ot(console,"log",l=>l.log(o));var s=()=>i.readEntries(o=>{if(o.length>0){for(let l of o)l.isFile?l.file(a=>{if(!(this.options.ignoreHiddenFiles&&a.name.substring(0,1)==="."))return a.fullPath=`${t}/${a.name}`,this.addFile(a)}):l.isDirectory&&this._addFilesFromDirectory(l,`${t}/${l.name}`);s()}return null},n);return s()}accept(e,t){this.options.maxFilesize&&e.size>this.options.maxFilesize*1048576?t(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(e.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):f.isValidFile(e,this.options.acceptedFiles)?this.options.maxFiles!=null&&this.getAcceptedFiles().length>=this.options.maxFiles?(t(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",e)):this.options.accept.call(this,e,t):t(this.options.dictInvalidFileType)}addFile(e){e.upload={uuid:f.uuidv4(),progress:0,total:e.size,bytesSent:0,filename:this._renameFile(e)},this.files.push(e),e.status=f.ADDED,this.emit("addedfile",e),this._enqueueThumbnail(e),this.accept(e,t=>{t?(e.accepted=!1,this._errorProcessing([e],t)):(e.accepted=!0,this.options.autoQueue&&this.enqueueFile(e)),this._updateMaxFilesReachedClass()})}enqueueFiles(e){for(let t of e)this.enqueueFile(t);return null}enqueueFile(e){if(e.status===f.ADDED&&e.accepted===!0){if(e.status=f.QUEUED,this.options.autoProcessQueue)return setTimeout(()=>this.processQueue(),0)}else throw new Error("This file can't be queued because it has already been processed or was rejected.")}_enqueueThumbnail(e){if(this.options.createImageThumbnails&&e.type.match(/image.*/)&&e.size<=this.options.maxThumbnailFilesize*1048576)return this._thumbnailQueue.push(e),setTimeout(()=>this._processThumbnailQueue(),0)}_processThumbnailQueue(){if(this._processingThumbnail||this._thumbnailQueue.length===0)return;this._processingThumbnail=!0;let e=this._thumbnailQueue.shift();return this.createThumbnail(e,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,!0,t=>(this.emit("thumbnail",e,t),this._processingThumbnail=!1,this._processThumbnailQueue()))}removeFile(e){if(e.status===f.UPLOADING&&this.cancelUpload(e),this.files=Ft(this.files,e),this.emit("removedfile",e),this.files.length===0)return this.emit("reset")}removeAllFiles(e){e==null&&(e=!1);for(let t of this.files.slice())(t.status!==f.UPLOADING||e)&&this.removeFile(t);return null}resizeImage(e,t,i,n,s){return this.createThumbnail(e,t,i,n,!0,(o,l)=>{if(l==null)return s(e);{let{resizeMimeType:a}=this.options;a==null&&(a=e.type);let h=l.toDataURL(a,this.options.resizeQuality);return(a==="image/jpeg"||a==="image/jpg")&&(h=Ne.restore(e.dataURL,h)),s(f.dataURItoBlob(h))}})}createThumbnail(e,t,i,n,s,o){let l=new FileReader;l.onload=()=>{if(e.dataURL=l.result,e.type==="image/svg+xml"){o!=null&&o(l.result);return}this.createThumbnailFromUrl(e,t,i,n,s,o)},l.readAsDataURL(e)}displayExistingFile(e,t,i,n,s=!0){if(this.emit("addedfile",e),this.emit("complete",e),!s)this.emit("thumbnail",e,t),i&&i();else{let o=l=>{this.emit("thumbnail",e,l),i&&i()};e.dataURL=t,this.createThumbnailFromUrl(e,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,this.options.fixOrientation,o,n)}}createThumbnailFromUrl(e,t,i,n,s,o,l){let a=document.createElement("img");return l&&(a.crossOrigin=l),s=getComputedStyle(document.body).imageOrientation=="from-image"?!1:s,a.onload=()=>{let h=c=>c(1);return typeof EXIF<"u"&&EXIF!==null&&s&&(h=c=>EXIF.getData(a,function(){return c(EXIF.getTag(this,"Orientation"))})),h(c=>{e.width=a.width,e.height=a.height;let d=this.options.resize.call(this,e,t,i,n),m=document.createElement("canvas"),p=m.getContext("2d");switch(m.width=d.trgWidth,m.height=d.trgHeight,c>4&&(m.width=d.trgHeight,m.height=d.trgWidth),c){case 2:p.translate(m.width,0),p.scale(-1,1);break;case 3:p.translate(m.width,m.height),p.rotate(Math.PI);break;case 4:p.translate(0,m.height),p.scale(1,-1);break;case 5:p.rotate(.5*Math.PI),p.scale(1,-1);break;case 6:p.rotate(.5*Math.PI),p.translate(0,-m.width);break;case 7:p.rotate(.5*Math.PI),p.translate(m.height,-m.width),p.scale(-1,1);break;case 8:p.rotate(-.5*Math.PI),p.translate(-m.height,0);break}Nt(p,a,d.srcX!=null?d.srcX:0,d.srcY!=null?d.srcY:0,d.srcWidth,d.srcHeight,d.trgX!=null?d.trgX:0,d.trgY!=null?d.trgY:0,d.trgWidth,d.trgHeight);let I=m.toDataURL("image/png");if(o!=null)return o(I,m)})},o!=null&&(a.onerror=o),a.src=e.dataURL}processQueue(){let{parallelUploads:e}=this.options,t=this.getUploadingFiles().length,i=t;if(t>=e)return;let n=this.getQueuedFiles();if(n.length>0){if(this.options.uploadMultiple)return this.processFiles(n.slice(0,e-t));for(;i<e;){if(!n.length)return;this.processFile(n.shift()),i++}}}processFile(e){return this.processFiles([e])}processFiles(e){for(let t of e)t.processing=!0,t.status=f.UPLOADING,this.emit("processing",t);return this.options.uploadMultiple&&this.emit("processingmultiple",e),this.uploadFiles(e)}_getFilesWithXhr(e){return this.files.filter(t=>t.xhr===e).map(t=>t)}cancelUpload(e){if(e.status===f.UPLOADING){let t=this._getFilesWithXhr(e.xhr);for(let i of t)i.status=f.CANCELED;typeof e.xhr<"u"&&e.xhr.abort();for(let i of t)this.emit("canceled",i);this.options.uploadMultiple&&this.emit("canceledmultiple",t)}else(e.status===f.ADDED||e.status===f.QUEUED)&&(e.status=f.CANCELED,this.emit("canceled",e),this.options.uploadMultiple&&this.emit("canceledmultiple",[e]));if(this.options.autoProcessQueue)return this.processQueue()}resolveOption(e,...t){return typeof e=="function"?e.apply(this,t):e}uploadFile(e){return this.uploadFiles([e])}uploadFiles(e){this._transformFiles(e,t=>{if(this.options.chunking){let i=t[0];e[0].upload.chunked=this.options.chunking&&(this.options.forceChunking||i.size>this.options.chunkSize),e[0].upload.totalChunkCount=Math.ceil(i.size/this.options.chunkSize)}if(e[0].upload.chunked){let i=e[0],n=t[0];i.upload.chunks=[];let s=()=>{let o=0;for(;i.upload.chunks[o]!==void 0;)o++;if(o>=i.upload.totalChunkCount)return;let l=o*this.options.chunkSize,a=Math.min(l+this.options.chunkSize,n.size),h={name:this._getParamName(0),data:n.webkitSlice?n.webkitSlice(l,a):n.slice(l,a),filename:i.upload.filename,chunkIndex:o};i.upload.chunks[o]={file:i,index:o,dataBlock:h,status:f.UPLOADING,progress:0,retries:0},this._uploadData(e,[h])};if(i.upload.finishedChunkUpload=(o,l)=>{let a=!0;o.status=f.SUCCESS,o.dataBlock=null,o.response=o.xhr.responseText,o.responseHeaders=o.xhr.getAllResponseHeaders(),o.xhr=null;for(let h=0;h<i.upload.totalChunkCount;h++){if(i.upload.chunks[h]===void 0)return s();i.upload.chunks[h].status!==f.SUCCESS&&(a=!1)}a&&this.options.chunksUploaded(i,()=>{this._finished(e,l,null)})},this.options.parallelChunkUploads)for(let o=0;o<i.upload.totalChunkCount;o++)s();else s()}else{let i=[];for(let n=0;n<e.length;n++)i[n]={name:this._getParamName(n),data:t[n],filename:e[n].upload.filename};this._uploadData(e,i)}})}_getChunk(e,t){for(let i=0;i<e.upload.totalChunkCount;i++)if(e.upload.chunks[i]!==void 0&&e.upload.chunks[i].xhr===t)return e.upload.chunks[i]}_uploadData(e,t){let i=new XMLHttpRequest;for(let h of e)h.xhr=i;e[0].upload.chunked&&(e[0].upload.chunks[t[0].chunkIndex].xhr=i);let n=this.resolveOption(this.options.method,e,t),s=this.resolveOption(this.options.url,e,t);i.open(n,s,!0),this.resolveOption(this.options.timeout,e)&&(i.timeout=this.resolveOption(this.options.timeout,e)),i.withCredentials=!!this.options.withCredentials,i.onload=h=>{this._finishedUploading(e,i,h)},i.ontimeout=()=>{this._handleUploadError(e,i,`Request timedout after ${this.options.timeout/1e3} seconds`)},i.onerror=()=>{this._handleUploadError(e,i)};let l=i.upload!=null?i.upload:i;l.onprogress=h=>this._updateFilesUploadProgress(e,i,h);let a=this.options.defaultHeaders?{Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"}:{};this.options.binaryBody&&(a["Content-Type"]=e[0].type),this.options.headers&&he(a,this.options.headers);for(let h in a){let c=a[h];c&&i.setRequestHeader(h,c)}if(this.options.binaryBody){for(let h of e)this.emit("sending",h,i);this.options.uploadMultiple&&this.emit("sendingmultiple",e,i),this.submitRequest(i,null,e)}else{let h=new FormData;if(this.options.params){let c=this.options.params;typeof c=="function"&&(c=c.call(this,e,i,e[0].upload.chunked?this._getChunk(e[0],i):null));for(let d in c){let m=c[d];if(Array.isArray(m))for(let p=0;p<m.length;p++)h.append(d,m[p]);else h.append(d,m)}}for(let c of e)this.emit("sending",c,i,h);this.options.uploadMultiple&&this.emit("sendingmultiple",e,i,h),this._addFormElementData(h);for(let c=0;c<t.length;c++){let d=t[c];h.append(d.name,d.data,d.filename)}this.submitRequest(i,h,e)}}_transformFiles(e,t){let i=[],n=0;for(let s=0;s<e.length;s++)this.options.transformFile.call(this,e[s],o=>{i[s]=o,++n===e.length&&t(i)})}_addFormElementData(e){if(this.element.tagName==="FORM")for(let t of this.element.querySelectorAll("input, textarea, select, button")){let i=t.getAttribute("name"),n=t.getAttribute("type");if(n&&(n=n.toLowerCase()),!(typeof i>"u"||i===null))if(t.tagName==="SELECT"&&t.hasAttribute("multiple"))for(let s of t.options)s.selected&&e.append(i,s.value);else(!n||n!=="checkbox"&&n!=="radio"||t.checked)&&e.append(i,t.value)}}_updateFilesUploadProgress(e,t,i){if(e[0].upload.chunked){let n=e[0],s=this._getChunk(n,t);i?(s.progress=100*i.loaded/i.total,s.total=i.total,s.bytesSent=i.loaded):(s.progress=100,s.bytesSent=s.total),n.upload.progress=0,n.upload.total=0,n.upload.bytesSent=0;for(let o=0;o<n.upload.totalChunkCount;o++)n.upload.chunks[o]&&typeof n.upload.chunks[o].progress<"u"&&(n.upload.progress+=n.upload.chunks[o].progress,n.upload.total+=n.upload.chunks[o].total,n.upload.bytesSent+=n.upload.chunks[o].bytesSent);n.upload.progress=n.upload.progress/n.upload.totalChunkCount,this.emit("uploadprogress",n,n.upload.progress,n.upload.bytesSent)}else for(let n of e)n.upload.total&&n.upload.bytesSent&&n.upload.bytesSent==n.upload.total||(i?(n.upload.progress=100*i.loaded/i.total,n.upload.total=i.total,n.upload.bytesSent=i.loaded):(n.upload.progress=100,n.upload.bytesSent=n.upload.total),this.emit("uploadprogress",n,n.upload.progress,n.upload.bytesSent))}_finishedUploading(e,t,i){let n;if(e[0].status!==f.CANCELED&&t.readyState===4){if(t.responseType!=="arraybuffer"&&t.responseType!=="blob"&&(n=t.responseText,t.getResponseHeader("content-type")&&~t.getResponseHeader("content-type").indexOf("application/json")))try{n=JSON.parse(n)}catch(s){i=s,n="Invalid JSON response from server."}this._updateFilesUploadProgress(e,t),200<=t.status&&t.status<300?e[0].upload.chunked?e[0].upload.finishedChunkUpload(this._getChunk(e[0],t),n):this._finished(e,n,i):this._handleUploadError(e,t,n)}}_handleUploadError(e,t,i){if(e[0].status!==f.CANCELED){if(e[0].upload.chunked&&this.options.retryChunks){let n=this._getChunk(e[0],t);if(n.retries++<this.options.retryChunksLimit){this._uploadData(e,[n.dataBlock]);return}else console.warn("Retried this chunk too often. Giving up.")}this._errorProcessing(e,i||this.options.dictResponseError.replace("{{statusCode}}",t.status),t)}}submitRequest(e,t,i){if(e.readyState!=1){console.warn("Cannot send this request because the XMLHttpRequest.readyState is not OPENED.");return}if(this.options.binaryBody)if(i[0].upload.chunked){const n=this._getChunk(i[0],e);e.send(n.dataBlock.data)}else e.send(i[0]);else e.send(t)}_finished(e,t,i){for(let n of e)n.status=f.SUCCESS,this.emit("success",n,t,i),this.emit("complete",n);if(this.options.uploadMultiple&&(this.emit("successmultiple",e,t,i),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()}_errorProcessing(e,t,i){for(let n of e)n.status=f.ERROR,this.emit("error",n,t,i),this.emit("complete",n);if(this.options.uploadMultiple&&(this.emit("errormultiple",e,t,i),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()}static uuidv4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){let t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}constructor(e,t){super();let i,n;if(this.element=e,this.clickableElements=[],this.listeners=[],this.files=[],typeof this.element=="string"&&(this.element=document.querySelector(this.element)),!this.element||this.element.nodeType==null)throw new Error("Invalid dropzone element.");if(this.element.dropzone)throw new Error("Dropzone already attached.");f.instances.push(this),this.element.dropzone=this;let s=(n=f.optionsForElement(this.element))!=null?n:{};if(this.options=he(!0,{},Rt,s,t??{}),this.options.previewTemplate=this.options.previewTemplate.replace(/\n*/g,""),this.options.forceFallback||!f.isBrowserSupported())return this.options.fallback.call(this);if(this.options.url==null&&(this.options.url=this.element.getAttribute("action")),!this.options.url)throw new Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");if(this.options.uploadMultiple&&this.options.chunking)throw new Error("You cannot set both: uploadMultiple and chunking.");if(this.options.binaryBody&&this.options.uploadMultiple)throw new Error("You cannot set both: binaryBody and uploadMultiple.");this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes),this.options.renameFilename!=null&&(this.options.renameFile=o=>this.options.renameFilename.call(this,o.name,o)),typeof this.options.method=="string"&&(this.options.method=this.options.method.toUpperCase()),(i=this.getExistingFallback())&&i.parentNode&&i.parentNode.removeChild(i),this.options.previewsContainer!==!1&&(this.options.previewsContainer?this.previewsContainer=f.getElement(this.options.previewsContainer,"previewsContainer"):this.previewsContainer=this.element),this.options.clickable&&(this.options.clickable===!0?this.clickableElements=[this.element]:this.clickableElements=f.getElements(this.options.clickable,"clickable")),this.init()}}f.initClass();f.options={};f.optionsForElement=function(r){if(r.getAttribute("id"))return f.options[Tt(r.getAttribute("id"))]};f.instances=[];f.forElement=function(r){if(typeof r=="string"&&(r=document.querySelector(r)),(r!=null?r.dropzone:void 0)==null)throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return r.dropzone};f.discover=function(){let r;if(document.querySelectorAll)r=document.querySelectorAll(".dropzone");else{r=[];let e=t=>(()=>{let i=[];for(let n of t)/(^| )dropzone($| )/.test(n.className)?i.push(r.push(n)):i.push(void 0);return i})();e(document.getElementsByTagName("div")),e(document.getElementsByTagName("form"))}return(()=>{let e=[];for(let t of r)f.optionsForElement(t)!==!1?e.push(new f(t)):e.push(void 0);return e})()};f.blockedBrowsers=[/opera.*(Macintosh|Windows Phone).*version\/12/i];f.isBrowserSupported=function(){let r=!0;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if(!("classList"in document.createElement("a")))r=!1;else{f.blacklistedBrowsers!==void 0&&(f.blockedBrowsers=f.blacklistedBrowsers);for(let e of f.blockedBrowsers)if(e.test(navigator.userAgent)){r=!1;continue}}else r=!1;return r};f.dataURItoBlob=function(r){let e=atob(r.split(",")[1]),t=r.split(",")[0].split(":")[1].split(";")[0],i=new ArrayBuffer(e.length),n=new Uint8Array(i);for(let s=0,o=e.length,l=0<=o;l?s<=o:s>=o;l?s++:s--)n[s]=e.charCodeAt(s);return new Blob([i],{type:t})};const Ft=(r,e)=>r.filter(t=>t!==e).map(t=>t),Tt=r=>r.replace(/[\-_](\w)/g,e=>e.charAt(1).toUpperCase());f.createElement=function(r){let e=document.createElement("div");return e.innerHTML=r,e.childNodes[0]};f.elementInside=function(r,e){if(r===e)return!0;for(;r=r.parentNode;)if(r===e)return!0;return!1};f.getElement=function(r,e){let t;if(typeof r=="string"?t=document.querySelector(r):r.nodeType!=null&&(t=r),t==null)throw new Error(`Invalid \`${e}\` option provided. Please provide a CSS selector or a plain HTML element.`);return t};f.getElements=function(r,e){let t,i;if(r instanceof Array){i=[];try{for(t of r)i.push(this.getElement(t,e))}catch{i=null}}else if(typeof r=="string"){i=[];for(t of document.querySelectorAll(r))i.push(t)}else r.nodeType!=null&&(i=[r]);if(i==null||!i.length)throw new Error(`Invalid \`${e}\` option provided. Please provide a CSS selector, a plain HTML element or a list of those.`);return i};f.confirm=function(r,e,t){if(window.confirm(r))return e();if(t!=null)return t()};f.isValidFile=function(r,e){if(!e)return!0;e=e.split(",");let t=r.type,i=t.replace(/\/.*$/,"");for(let n of e)if(n=n.trim(),n.charAt(0)==="."){if(r.name.toLowerCase().indexOf(n.toLowerCase(),r.name.length-n.length)!==-1)return!0}else if(/\/\*$/.test(n)){if(i===n.replace(/\/.*$/,""))return!0}else if(t===n)return!0;return!1};typeof jQuery<"u"&&jQuery!==null&&(jQuery.fn.dropzone=function(r){return this.each(function(){return new f(this,r)})});f.ADDED="added";f.QUEUED="queued";f.ACCEPTED=f.QUEUED;f.UPLOADING="uploading";f.PROCESSING=f.UPLOADING;f.CANCELED="canceled";f.ERROR="error";f.SUCCESS="success";let kt=function(r){r.naturalWidth;let e=r.naturalHeight,t=document.createElement("canvas");t.width=1,t.height=e;let i=t.getContext("2d");i.drawImage(r,0,0);let{data:n}=i.getImageData(1,0,1,e),s=0,o=e,l=e;for(;l>s;)n[(l-1)*4+3]===0?o=l:s=l,l=o+s>>1;let a=l/e;return a===0?1:a};var Nt=function(r,e,t,i,n,s,o,l,a,h){let c=kt(e);return r.drawImage(e,t,i,n,s,o,l,a,h/c)};class Ne{static initClass(){this.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}static encode64(e){let t="",i,n,s="",o,l,a,h="",c=0;for(;i=e[c++],n=e[c++],s=e[c++],o=i>>2,l=(i&3)<<4|n>>4,a=(n&15)<<2|s>>6,h=s&63,isNaN(n)?a=h=64:isNaN(s)&&(h=64),t=t+this.KEY_STR.charAt(o)+this.KEY_STR.charAt(l)+this.KEY_STR.charAt(a)+this.KEY_STR.charAt(h),i=n=s="",o=l=a=h="",c<e.length;);return t}static restore(e,t){if(!e.match("data:image/jpeg;base64,"))return t;let i=this.decode64(e.replace("data:image/jpeg;base64,","")),n=this.slice2Segments(i),s=this.exifManipulation(t,n);return`data:image/jpeg;base64,${this.encode64(s)}`}static exifManipulation(e,t){let i=this.getExifArray(t),n=this.insertExif(e,i);return new Uint8Array(n)}static getExifArray(e){let t,i=0;for(;i<e.length;){if(t=e[i],t[0]===255&t[1]===225)return t;i++}return[]}static insertExif(e,t){let i=e.replace("data:image/jpeg;base64,",""),n=this.decode64(i),s=n.indexOf(255,3),o=n.slice(0,s),l=n.slice(s),a=o;return a=a.concat(t),a=a.concat(l),a}static slice2Segments(e){let t=0,i=[];for(;;){var n;if(e[t]===255&e[t+1]===218)break;if(e[t]===255&e[t+1]===216)t+=2;else{n=e[t+2]*256+e[t+3];let s=t+n+2,o=e.slice(t,s);i.push(o),t=s}if(t>e.length)break}return i}static decode64(e){let t,i,n="",s,o,l,a="",h=0,c=[];for(/[^A-Za-z0-9\+\/\=]/g.exec(e)&&console.warn(`There were invalid base64 characters in the input text.
Valid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='
Expect errors in decoding.`),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");s=this.KEY_STR.indexOf(e.charAt(h++)),o=this.KEY_STR.indexOf(e.charAt(h++)),l=this.KEY_STR.indexOf(e.charAt(h++)),a=this.KEY_STR.indexOf(e.charAt(h++)),t=s<<2|o>>4,i=(o&15)<<4|l>>2,n=(l&3)<<6|a,c.push(t),l!==64&&c.push(i),a!==64&&c.push(n),t=i=n="",s=o=l=a="",h<e.length;);return c}}Ne.initClass();function xt(r,e){return typeof r<"u"&&r!==null?e(r):void 0}function Ot(r,e,t){if(typeof r<"u"&&r!==null&&typeof r[e]=="function")return t(r,e)}const Lt="modulepreload",Ut=function(r,e){return new URL(r,e).href},fe={},Bt=function(e,t,i){let n=Promise.resolve();if(t&&t.length>0){const o=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),a=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));n=Promise.allSettled(t.map(h=>{if(h=Ut(h,i),h in fe)return;fe[h]=!0;const c=h.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(!!i)for(let I=o.length-1;I>=0;I--){const y=o[I];if(y.href===h&&(!c||y.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${h}"]${d}`))return;const p=document.createElement("link");if(p.rel=c?"stylesheet":Lt,c||(p.as="script"),p.crossOrigin="",p.href=h,a&&p.setAttribute("nonce",a),document.head.appendChild(p),c)return new Promise((I,y)=>{p.addEventListener("load",I),p.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${h}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return n.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};export{f as $,Bt as _,zt as b,Mt as c,Dt as p};
